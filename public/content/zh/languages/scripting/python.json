{
  "slug": "python",
  "meta": {
    "title": "Python 语言基础",
    "description": "Python 核心语法、常用库与最佳实践",
    "order": 1,
    "tags": [
      "python",
      "scripting",
      "dynamic"
    ]
  },
  "content": "<h1>Python 语言基础</h1>\n<h2>Python 概述</h2>\n<p>Python 是一门简洁、易读的高级编程语言，广泛应用于 Web 开发、数据科学、自动化运维、人工智能等领域。</p>\n<pre><code>Python 特点\n├── 动态类型 - 运行时类型检查\n├── 解释执行 - 无需编译\n├── 简洁语法 - 可读性强\n├── 丰富生态 - PyPI 海量包\n└── 跨平台 - 一次编写到处运行\n</code></pre>\n<h2>基础语法</h2>\n<h3>变量与类型</h3>\n<pre><code class=\"language-python\"># 变量声明 (无需类型标注)\nname = \"Python\"\nversion = 3.12\nis_dynamic = True\n\n# 类型标注 (Python 3.5+)\nname: str = \"Python\"\nage: int = 30\nscores: list[int] = [90, 85, 88]\n\n# 基本类型\ni = 42              # int\nf = 3.14            # float\nc = 3 + 4j          # complex\ns = \"hello\"         # str\nb = True            # bool\nn = None            # NoneType\n\n# 类型转换\nint(\"42\")           # 42\nfloat(\"3.14\")       # 3.14\nstr(42)             # \"42\"\nbool(0)             # False\nbool(1)             # True\n\n# 多变量赋值\nx, y, z = 1, 2, 3\na = b = c = 0\n</code></pre>\n<h3>字符串</h3>\n<pre><code class=\"language-python\"># 字符串操作\ns = \"Hello, World\"\ns.lower()           # \"hello, world\"\ns.upper()           # \"HELLO, WORLD\"\ns.strip()           # 去除首尾空白\ns.split(\",\")        # [\"Hello\", \" World\"]\n\",\".join([\"a\", \"b\"])  # \"a,b\"\ns.replace(\"World\", \"Python\")\n\n# 格式化\nname = \"Alice\"\nage = 30\n\n# f-string (推荐)\nf\"Name: {name}, Age: {age}\"\nf\"Next year: {age + 1}\"\nf\"Price: {price:.2f}\"\n\n# format()\n\"Name: {}, Age: {}\".format(name, age)\n\"Name: {name}, Age: {age}\".format(name=name, age=age)\n\n# % 格式化 (旧式)\n\"Name: %s, Age: %d\" % (name, age)\n\n# 多行字符串\ntext = \"\"\"\nThis is a\nmulti-line string\n\"\"\"\n\n# 原始字符串\npath = r\"C:\\Users\\name\\file.txt\"\n</code></pre>\n<h3>数据结构</h3>\n<pre><code class=\"language-python\"># 列表 (可变)\nfruits = [\"apple\", \"banana\", \"cherry\"]\nfruits.append(\"date\")\nfruits.insert(0, \"avocado\")\nfruits.remove(\"banana\")\nfruits.pop()\nfruits.sort()\nfruits.reverse()\n\n# 列表推导式\nsquares = [x**2 for x in range(10)]\nevens = [x for x in range(20) if x % 2 == 0]\nmatrix = [[i*j for j in range(3)] for i in range(3)]\n\n# 元组 (不可变)\npoint = (10, 20)\nx, y = point  # 解包\n\n# 集合\nunique = {1, 2, 3, 3}  # {1, 2, 3}\na = {1, 2, 3}\nb = {2, 3, 4}\na | b  # 并集 {1, 2, 3, 4}\na &#x26; b  # 交集 {2, 3}\na - b  # 差集 {1}\n\n# 字典\nuser = {\n    \"name\": \"Alice\",\n    \"age\": 30,\n    \"city\": \"Tokyo\"\n}\nuser[\"email\"] = \"alice@example.com\"\nuser.get(\"phone\", \"N/A\")\nuser.keys()\nuser.values()\nuser.items()\n\n# 字典推导式\nsquares = {x: x**2 for x in range(5)}\n</code></pre>\n<h3>控制流</h3>\n<pre><code class=\"language-python\"># if-elif-else\nif score >= 90:\n    grade = \"A\"\nelif score >= 80:\n    grade = \"B\"\nelse:\n    grade = \"C\"\n\n# 三元表达式\nresult = \"even\" if x % 2 == 0 else \"odd\"\n\n# for 循环\nfor i in range(5):\n    print(i)\n\nfor fruit in fruits:\n    print(fruit)\n\nfor i, fruit in enumerate(fruits):\n    print(f\"{i}: {fruit}\")\n\nfor key, value in user.items():\n    print(f\"{key}: {value}\")\n\n# while 循环\nwhile count > 0:\n    count -= 1\n\n# 循环控制\nfor i in range(10):\n    if i == 5:\n        continue  # 跳过\n    if i == 8:\n        break     # 退出\nelse:\n    print(\"Loop completed\")  # 正常结束时执行\n</code></pre>\n<h3>函数</h3>\n<pre><code class=\"language-python\"># 基本函数\ndef greet(name):\n    return f\"Hello, {name}!\"\n\n# 默认参数\ndef greet(name, greeting=\"Hello\"):\n    return f\"{greeting}, {name}!\"\n\n# 关键字参数\ngreet(name=\"Alice\", greeting=\"Hi\")\n\n# 可变参数\ndef sum_all(*args):\n    return sum(args)\n\nsum_all(1, 2, 3, 4)  # 10\n\n# 关键字可变参数\ndef print_info(**kwargs):\n    for key, value in kwargs.items():\n        print(f\"{key}: {value}\")\n\nprint_info(name=\"Alice\", age=30)\n\n# 类型标注\ndef add(a: int, b: int) -> int:\n    return a + b\n\n# Lambda\nsquare = lambda x: x ** 2\nsorted(users, key=lambda u: u[\"age\"])\n\n# 装饰器\ndef timer(func):\n    def wrapper(*args, **kwargs):\n        start = time.time()\n        result = func(*args, **kwargs)\n        print(f\"Time: {time.time() - start:.2f}s\")\n        return result\n    return wrapper\n\n@timer\ndef slow_function():\n    time.sleep(1)\n</code></pre>\n<h3>类与对象</h3>\n<pre><code class=\"language-python\">from dataclasses import dataclass\nfrom typing import Optional\n\n# 基本类\nclass Person:\n    def __init__(self, name: str, age: int):\n        self.name = name\n        self.age = age\n\n    def greet(self) -> str:\n        return f\"Hello, I'm {self.name}\"\n\n    @property\n    def is_adult(self) -> bool:\n        return self.age >= 18\n\n    @classmethod\n    def from_dict(cls, data: dict) -> \"Person\":\n        return cls(data[\"name\"], data[\"age\"])\n\n    @staticmethod\n    def validate_age(age: int) -> bool:\n        return 0 &#x3C;= age &#x3C;= 150\n\n# 继承\nclass Student(Person):\n    def __init__(self, name: str, age: int, grade: int):\n        super().__init__(name, age)\n        self.grade = grade\n\n    def greet(self) -> str:\n        return f\"Hi, I'm {self.name}, grade {self.grade}\"\n\n# dataclass (Python 3.7+)\n@dataclass\nclass Point:\n    x: float\n    y: float\n    z: float = 0.0\n\n    def distance(self, other: \"Point\") -> float:\n        return ((self.x - other.x)**2 +\n                (self.y - other.y)**2 +\n                (self.z - other.z)**2) ** 0.5\n\n# 抽象类\nfrom abc import ABC, abstractmethod\n\nclass Shape(ABC):\n    @abstractmethod\n    def area(self) -> float:\n        pass\n</code></pre>\n<h2>异常处理</h2>\n<pre><code class=\"language-python\"># try-except\ntry:\n    result = 10 / 0\nexcept ZeroDivisionError as e:\n    print(f\"Error: {e}\")\nexcept (TypeError, ValueError) as e:\n    print(f\"Type/Value error: {e}\")\nexcept Exception as e:\n    print(f\"Unexpected error: {e}\")\nelse:\n    print(\"Success\")\nfinally:\n    print(\"Cleanup\")\n\n# 抛出异常\ndef validate_age(age: int):\n    if age &#x3C; 0:\n        raise ValueError(\"Age cannot be negative\")\n\n# 自定义异常\nclass ValidationError(Exception):\n    def __init__(self, field: str, message: str):\n        self.field = field\n        self.message = message\n        super().__init__(f\"{field}: {message}\")\n\n# 上下文管理器\nwith open(\"file.txt\", \"r\") as f:\n    content = f.read()\n</code></pre>\n<h2>模块与包</h2>\n<pre><code class=\"language-python\"># 导入\nimport os\nimport json\nfrom pathlib import Path\nfrom typing import List, Dict, Optional\nfrom collections import defaultdict, Counter\nfrom datetime import datetime, timedelta\n\n# 相对导入 (包内)\nfrom . import module\nfrom .module import function\nfrom .. import parent_module\n\n# 包结构\n# mypackage/\n# ├── __init__.py\n# ├── module1.py\n# ├── module2.py\n# └── subpackage/\n#     ├── __init__.py\n#     └── module3.py\n</code></pre>\n<h2>常用标准库</h2>\n<pre><code class=\"language-python\"># os - 操作系统接口\nimport os\nos.getcwd()\nos.listdir(\".\")\nos.makedirs(\"dir/subdir\", exist_ok=True)\nos.environ.get(\"HOME\")\n\n# pathlib - 路径操作 (推荐)\nfrom pathlib import Path\np = Path(\"dir/file.txt\")\np.exists()\np.read_text()\np.write_text(\"content\")\nlist(Path(\".\").glob(\"*.py\"))\n\n# json\nimport json\ndata = json.loads('{\"name\": \"Alice\"}')\njson.dumps(data, indent=2)\n\n# datetime\nfrom datetime import datetime, timedelta\nnow = datetime.now()\nnow.strftime(\"%Y-%m-%d %H:%M:%S\")\ndatetime.strptime(\"2024-01-01\", \"%Y-%m-%d\")\n\n# collections\nfrom collections import Counter, defaultdict\nCounter([\"a\", \"b\", \"a\", \"c\", \"a\"])  # Counter({'a': 3, 'b': 1, 'c': 1})\nd = defaultdict(list)\nd[\"key\"].append(\"value\")\n\n# itertools\nfrom itertools import chain, groupby, combinations\nlist(chain([1, 2], [3, 4]))  # [1, 2, 3, 4]\nlist(combinations([1, 2, 3], 2))  # [(1, 2), (1, 3), (2, 3)]\n</code></pre>\n<h2>异步编程</h2>\n<pre><code class=\"language-python\">import asyncio\n\n# async 函数\nasync def fetch_data(url: str) -> str:\n    await asyncio.sleep(1)  # 模拟 I/O\n    return f\"Data from {url}\"\n\n# 运行\nasync def main():\n    # 顺序执行\n    result = await fetch_data(\"http://example.com\")\n\n    # 并发执行\n    results = await asyncio.gather(\n        fetch_data(\"http://a.com\"),\n        fetch_data(\"http://b.com\"),\n        fetch_data(\"http://c.com\")\n    )\n\nasyncio.run(main())\n</code></pre>\n<h2>虚拟环境</h2>\n<pre><code class=\"language-bash\"># venv\npython -m venv .venv\nsource .venv/bin/activate  # Linux/Mac\n.venv\\Scripts\\activate     # Windows\npip install -r requirements.txt\ndeactivate\n\n# poetry (推荐)\npoetry init\npoetry add requests\npoetry install\npoetry shell\n</code></pre>\n<h2>总结</h2>\n<p>Python 核心要点：</p>\n<ol>\n<li><strong>简洁语法</strong> - 可读性强，学习曲线平缓</li>\n<li><strong>动态类型</strong> - 灵活但需注意类型错误</li>\n<li><strong>丰富生态</strong> - 几乎任何需求都有现成库</li>\n<li><strong>多范式</strong> - 支持面向对象、函数式编程</li>\n<li><strong>类型标注</strong> - 现代 Python 推荐使用</li>\n</ol>\n"
}