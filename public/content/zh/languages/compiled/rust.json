{
  "slug": "rust",
  "meta": {
    "title": "Rust 语言基础",
    "description": "Rust 所有权系统、内存安全与系统编程",
    "order": 2,
    "tags": [
      "Rust",
      "内存安全",
      "系统编程"
    ]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "核心概念",
      "items": [
        "Rust 是注重安全、并发和性能的系统语言",
        "所有权系统在编译时保证内存安全",
        "零成本抽象，无运行时开销",
        "无垃圾回收，可预测性能"
      ]
    },
    {
      "type": "cards",
      "title": "所有权规则",
      "layout": "grid",
      "columns": 3,
      "items": [
        {
          "title": "唯一所有者",
          "badge": "规则1",
          "badgeColor": "blue",
          "points": [
            "每个值有一个所有者",
            "同时只能有一个",
            "离开作用域时释放"
          ]
        },
        {
          "title": "移动语义",
          "badge": "规则2",
          "badgeColor": "green",
          "points": [
            "赋值转移所有权",
            "原变量失效",
            "Clone 深拷贝"
          ]
        },
        {
          "title": "借用",
          "badge": "规则3",
          "badgeColor": "purple",
          "points": [
            "& 不可变借用",
            "&mut 可变借用",
            "不能同时存在"
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "所有权示例",
      "language": "rust",
      "code": "fn main() {\n    let s1 = String::from(\"hello\");\n    let s2 = s1;  // s1 移动到 s2\n    // println!(\"{}\", s1);  // 错误! s1 已失效\n    \n    // 借用 (不转移所有权)\n    let s3 = String::from(\"world\");\n    let len = calculate_length(&s3);  // 借用\n    println!(\"{} len: {}\", s3, len);  // s3 仍有效\n}\n\nfn calculate_length(s: &String) -> usize {\n    s.len()\n}"
    },
    {
      "type": "comparison",
      "title": "引用规则",
      "columns": [
        {
          "title": "不可变引用 &T",
          "color": "from-blue-500 to-cyan-500",
          "items": [
            {
              "label": "数量",
              "description": "可以有多个"
            },
            {
              "label": "读写",
              "description": "只读"
            },
            {
              "label": "生命周期",
              "description": "借用检查"
            }
          ]
        },
        {
          "title": "可变引用 &mut T",
          "color": "from-red-500 to-orange-500",
          "items": [
            {
              "label": "数量",
              "description": "只能有一个"
            },
            {
              "label": "读写",
              "description": "可读写"
            },
            {
              "label": "生命周期",
              "description": "独占访问"
            }
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "结构体与 Trait",
      "language": "rust",
      "code": "#[derive(Debug, Clone)]\nstruct User {\n    name: String,\n    age: u32,\n}\n\nimpl User {\n    fn new(name: String) -> Self {\n        Self { name, age: 0 }\n    }\n}\n\n// Trait 定义行为\ntrait Summary {\n    fn summarize(&self) -> String;\n}\n\nimpl Summary for User {\n    fn summarize(&self) -> String {\n        format!(\"{}, age {}\", self.name, self.age)\n    }\n}"
    },
    {
      "type": "codeBlock",
      "title": "错误处理",
      "language": "rust",
      "code": "use std::fs::File;\nuse std::io::{self, Read};\n\nfn read_file(path: &str) -> Result<String, io::Error> {\n    let mut file = File::open(path)?;  // ? 传播错误\n    let mut content = String::new();\n    file.read_to_string(&mut content)?;\n    Ok(content)\n}\n\n// 使用\nmatch read_file(\"hello.txt\") {\n    Ok(content) => println!(\"{}\", content),\n    Err(e) => eprintln!(\"Error: {}\", e),\n}"
    },
    {
      "type": "table",
      "title": "常用 Crate",
      "highlightFirst": true,
      "headers": [
        "Crate",
        "用途",
        "功能"
      ],
      "rows": [
        [
          "serde",
          "序列化",
          "JSON/YAML/TOML"
        ],
        [
          "tokio",
          "异步运行时",
          "async/await"
        ],
        [
          "reqwest",
          "HTTP 客户端",
          "异步请求"
        ],
        [
          "anyhow",
          "错误处理",
          "简化错误类型"
        ],
        [
          "clap",
          "CLI 解析",
          "命令行参数"
        ]
      ]
    },
    {
      "type": "list",
      "title": "核心要点",
      "style": "check",
      "items": [
        {
          "label": "所有权系统",
          "description": "编译时内存安全保证"
        },
        {
          "label": "借用检查器",
          "description": "防止数据竞争"
        },
        {
          "label": "模式匹配",
          "description": "match 表达式强大"
        },
        {
          "label": "Cargo",
          "description": "优秀的包管理和构建工具"
        }
      ]
    }
  ],
  "relatedTopics": [
    "Go",
    "C++",
    "系统编程"
  ]
}