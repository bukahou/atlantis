{
  "slug": "typescript",
  "meta": {
    "title": "TypeScript 语言基础",
    "description": "TypeScript 类型系统、高级类型与前端开发最佳实践",
    "order": 1,
    "tags": [
      "typescript",
      "web",
      "frontend",
      "static-typing"
    ]
  },
  "content": "<h1>TypeScript 语言基础</h1>\n<h2>TypeScript 概述</h2>\n<p>TypeScript 是 JavaScript 的超集，添加了静态类型系统和现代 ECMAScript 特性，提供更好的开发体验和代码可维护性。</p>\n<pre><code>TypeScript 特点\n├── 静态类型 - 编译时类型检查\n├── 类型推断 - 智能类型推导\n├── 渐进式采用 - 与 JavaScript 无缝兼容\n├── 现代语法 - 支持最新 ECMAScript 特性\n└── 工具支持 - 强大的 IDE 支持\n</code></pre>\n<h2>基础类型</h2>\n<h3>原始类型</h3>\n<pre><code class=\"language-typescript\">// 基本类型\nlet name: string = \"TypeScript\";\nlet age: number = 10;\nlet isTyped: boolean = true;\nlet nothing: null = null;\nlet notDefined: undefined = undefined;\n\n// 类型推断\nlet inferred = \"Hello\";  // 自动推断为 string\n\n// 字面量类型\nlet direction: \"left\" | \"right\" | \"up\" | \"down\" = \"left\";\nlet statusCode: 200 | 404 | 500 = 200;\n\n// any 与 unknown\nlet anyValue: any = \"anything\";\nlet unknownValue: unknown = \"check first\";\n\n// unknown 需要类型检查\nif (typeof unknownValue === \"string\") {\n    console.log(unknownValue.toUpperCase());\n}\n\n// never - 永不返回\nfunction throwError(msg: string): never {\n    throw new Error(msg);\n}\n</code></pre>\n<h3>数组与元组</h3>\n<pre><code class=\"language-typescript\">// 数组\nlet numbers: number[] = [1, 2, 3];\nlet strings: Array&#x3C;string> = [\"a\", \"b\", \"c\"];\n\n// 只读数组\nlet readonlyArr: readonly number[] = [1, 2, 3];\nlet readonlyArr2: ReadonlyArray&#x3C;number> = [1, 2, 3];\n\n// 元组 - 固定长度和类型\nlet tuple: [string, number] = [\"age\", 30];\nlet tuple2: [string, number, boolean] = [\"name\", 1, true];\n\n// 具名元组 (TS 4.0+)\ntype Point = [x: number, y: number, z?: number];\nlet point: Point = [10, 20];\n\n// 可变长度元组\ntype StringNumberBooleans = [string, number, ...boolean[]];\n</code></pre>\n<h3>对象类型</h3>\n<pre><code class=\"language-typescript\">// 对象类型\nlet user: { name: string; age: number } = {\n    name: \"Alice\",\n    age: 30\n};\n\n// 可选属性\nlet config: { host: string; port?: number } = {\n    host: \"localhost\"\n};\n\n// 只读属性\nlet point: { readonly x: number; readonly y: number } = {\n    x: 10,\n    y: 20\n};\n\n// 索引签名\nlet dict: { [key: string]: number } = {\n    apple: 1,\n    banana: 2\n};\n\n// Record 类型\nlet record: Record&#x3C;string, number> = {\n    a: 1,\n    b: 2\n};\n</code></pre>\n<h2>接口与类型别名</h2>\n<h3>接口</h3>\n<pre><code class=\"language-typescript\">// 接口定义\ninterface User {\n    id: number;\n    name: string;\n    email: string;\n    age?: number;  // 可选\n    readonly createdAt: Date;  // 只读\n}\n\n// 接口扩展\ninterface Admin extends User {\n    role: \"admin\";\n    permissions: string[];\n}\n\n// 多接口继承\ninterface SuperAdmin extends User, Admin {\n    superPower: boolean;\n}\n\n// 函数接口\ninterface SearchFunc {\n    (query: string, limit?: number): Promise&#x3C;Result[]>;\n}\n\n// 可调用接口\ninterface CallableUser {\n    (): void;\n    name: string;\n}\n\n// 索引接口\ninterface StringArray {\n    [index: number]: string;\n}\n</code></pre>\n<h3>类型别名</h3>\n<pre><code class=\"language-typescript\">// 类型别名\ntype ID = string | number;\ntype Point = { x: number; y: number };\ntype Callback = (data: string) => void;\n\n// 联合类型\ntype Status = \"pending\" | \"success\" | \"error\";\ntype Result = string | number | null;\n\n// 交叉类型\ntype Employee = User &#x26; { department: string };\n\n// 条件类型\ntype NonNullable&#x3C;T> = T extends null | undefined ? never : T;\n\n// 映射类型\ntype Readonly&#x3C;T> = {\n    readonly [P in keyof T]: T[P];\n};\n\ntype Partial&#x3C;T> = {\n    [P in keyof T]?: T[P];\n};\n</code></pre>\n<h2>函数类型</h2>\n<h3>函数声明</h3>\n<pre><code class=\"language-typescript\">// 函数类型声明\nfunction add(a: number, b: number): number {\n    return a + b;\n}\n\n// 箭头函数\nconst multiply = (a: number, b: number): number => a * b;\n\n// 可选参数\nfunction greet(name: string, greeting?: string): string {\n    return `${greeting ?? \"Hello\"}, ${name}!`;\n}\n\n// 默认参数\nfunction createUser(name: string, role: string = \"user\"): User {\n    return { name, role };\n}\n\n// 剩余参数\nfunction sum(...numbers: number[]): number {\n    return numbers.reduce((a, b) => a + b, 0);\n}\n\n// 函数重载\nfunction format(value: string): string;\nfunction format(value: number): string;\nfunction format(value: string | number): string {\n    return String(value);\n}\n</code></pre>\n<h3>泛型函数</h3>\n<pre><code class=\"language-typescript\">// 泛型函数\nfunction identity&#x3C;T>(value: T): T {\n    return value;\n}\n\n// 多泛型参数\nfunction pair&#x3C;T, U>(first: T, second: U): [T, U] {\n    return [first, second];\n}\n\n// 泛型约束\nfunction getLength&#x3C;T extends { length: number }>(value: T): number {\n    return value.length;\n}\n\n// keyof 约束\nfunction getProperty&#x3C;T, K extends keyof T>(obj: T, key: K): T[K] {\n    return obj[key];\n}\n\n// 默认泛型类型\nfunction createArray&#x3C;T = string>(length: number, value: T): T[] {\n    return Array(length).fill(value);\n}\n</code></pre>\n<h2>类</h2>\n<pre><code class=\"language-typescript\">// 类定义\nclass Person {\n    // 属性\n    public name: string;\n    private age: number;\n    protected email: string;\n    readonly id: number;\n\n    // 静态属性\n    static count = 0;\n\n    // 构造函数\n    constructor(name: string, age: number) {\n        this.name = name;\n        this.age = age;\n        this.email = \"\";\n        this.id = ++Person.count;\n    }\n\n    // 方法\n    greet(): string {\n        return `Hello, I'm ${this.name}`;\n    }\n\n    // getter/setter\n    get fullInfo(): string {\n        return `${this.name} (${this.age})`;\n    }\n\n    set userAge(age: number) {\n        if (age > 0) this.age = age;\n    }\n}\n\n// 继承\nclass Employee extends Person {\n    department: string;\n\n    constructor(name: string, age: number, department: string) {\n        super(name, age);\n        this.department = department;\n    }\n\n    override greet(): string {\n        return `${super.greet()}, from ${this.department}`;\n    }\n}\n\n// 抽象类\nabstract class Shape {\n    abstract area(): number;\n    abstract perimeter(): number;\n\n    describe(): string {\n        return `Area: ${this.area()}`;\n    }\n}\n\n// 实现接口\ninterface Printable {\n    print(): void;\n}\n\nclass Document implements Printable {\n    print(): void {\n        console.log(\"Printing...\");\n    }\n}\n</code></pre>\n<h2>高级类型</h2>\n<h3>实用类型</h3>\n<pre><code class=\"language-typescript\">interface User {\n    id: number;\n    name: string;\n    email: string;\n    age: number;\n}\n\n// Partial - 所有属性可选\ntype PartialUser = Partial&#x3C;User>;\n\n// Required - 所有属性必选\ntype RequiredUser = Required&#x3C;User>;\n\n// Readonly - 所有属性只读\ntype ReadonlyUser = Readonly&#x3C;User>;\n\n// Pick - 选择部分属性\ntype UserBasic = Pick&#x3C;User, \"id\" | \"name\">;\n\n// Omit - 排除部分属性\ntype UserWithoutEmail = Omit&#x3C;User, \"email\">;\n\n// Record - 构造对象类型\ntype UserRecord = Record&#x3C;string, User>;\n\n// Exclude - 排除联合类型成员\ntype Status = \"pending\" | \"success\" | \"error\";\ntype SuccessStatus = Exclude&#x3C;Status, \"error\">;\n\n// Extract - 提取联合类型成员\ntype ErrorStatus = Extract&#x3C;Status, \"error\" | \"pending\">;\n\n// ReturnType - 获取函数返回类型\nfunction getUser() { return { id: 1, name: \"Alice\" }; }\ntype UserType = ReturnType&#x3C;typeof getUser>;\n\n// Parameters - 获取函数参数类型\ntype GetUserParams = Parameters&#x3C;typeof getUser>;\n</code></pre>\n<h3>条件类型</h3>\n<pre><code class=\"language-typescript\">// 基本条件类型\ntype IsString&#x3C;T> = T extends string ? true : false;\n\n// infer 关键字\ntype UnwrapPromise&#x3C;T> = T extends Promise&#x3C;infer U> ? U : T;\ntype ArrayElement&#x3C;T> = T extends (infer E)[] ? E : never;\n\n// 分布式条件类型\ntype ToArray&#x3C;T> = T extends any ? T[] : never;\ntype Result = ToArray&#x3C;string | number>;  // string[] | number[]\n\n// 模板字面量类型\ntype EventName = `on${Capitalize&#x3C;\"click\" | \"focus\" | \"blur\">}`;\n// \"onClick\" | \"onFocus\" | \"onBlur\"\n</code></pre>\n<h3>类型守卫</h3>\n<pre><code class=\"language-typescript\">// typeof 守卫\nfunction process(value: string | number) {\n    if (typeof value === \"string\") {\n        return value.toUpperCase();\n    }\n    return value.toFixed(2);\n}\n\n// instanceof 守卫\nfunction handleError(error: Error | string) {\n    if (error instanceof Error) {\n        return error.message;\n    }\n    return error;\n}\n\n// in 守卫\ninterface Cat { meow(): void; }\ninterface Dog { bark(): void; }\n\nfunction speak(animal: Cat | Dog) {\n    if (\"meow\" in animal) {\n        animal.meow();\n    } else {\n        animal.bark();\n    }\n}\n\n// 自定义类型守卫\nfunction isString(value: unknown): value is string {\n    return typeof value === \"string\";\n}\n\n// 断言函数\nfunction assertNonNull&#x3C;T>(value: T): asserts value is NonNullable&#x3C;T> {\n    if (value === null || value === undefined) {\n        throw new Error(\"Value is null or undefined\");\n    }\n}\n</code></pre>\n<h2>模块与命名空间</h2>\n<pre><code class=\"language-typescript\">// 导出\nexport interface User { name: string; }\nexport type ID = string | number;\nexport const VERSION = \"1.0.0\";\nexport default class App { }\n\n// 导入\nimport App, { User, ID, VERSION } from \"./app\";\nimport type { User } from \"./app\";  // 仅类型导入\nimport * as Utils from \"./utils\";\n\n// 动态导入\nconst module = await import(\"./module\");\n\n// 类型声明文件 (.d.ts)\ndeclare module \"some-library\" {\n    export function doSomething(): void;\n}\n\n// 全局声明\ndeclare global {\n    interface Window {\n        myGlobal: string;\n    }\n}\n</code></pre>\n<h2>装饰器</h2>\n<pre><code class=\"language-typescript\">// 类装饰器\nfunction sealed(constructor: Function) {\n    Object.seal(constructor);\n    Object.seal(constructor.prototype);\n}\n\n@sealed\nclass Greeter { }\n\n// 方法装饰器\nfunction log(target: any, key: string, descriptor: PropertyDescriptor) {\n    const original = descriptor.value;\n    descriptor.value = function(...args: any[]) {\n        console.log(`Calling ${key} with`, args);\n        return original.apply(this, args);\n    };\n    return descriptor;\n}\n\nclass Calculator {\n    @log\n    add(a: number, b: number) {\n        return a + b;\n    }\n}\n\n// 属性装饰器\nfunction readonly(target: any, key: string) {\n    Object.defineProperty(target, key, {\n        writable: false\n    });\n}\n</code></pre>\n<h2>配置与工具</h2>\n<h3>tsconfig.json</h3>\n<pre><code class=\"language-json\">{\n    \"compilerOptions\": {\n        \"target\": \"ES2022\",\n        \"module\": \"ESNext\",\n        \"moduleResolution\": \"bundler\",\n        \"strict\": true,\n        \"noImplicitAny\": true,\n        \"strictNullChecks\": true,\n        \"esModuleInterop\": true,\n        \"skipLibCheck\": true,\n        \"declaration\": true,\n        \"outDir\": \"./dist\",\n        \"rootDir\": \"./src\",\n        \"baseUrl\": \"./\",\n        \"paths\": {\n            \"@/*\": [\"src/*\"]\n        }\n    },\n    \"include\": [\"src/**/*\"],\n    \"exclude\": [\"node_modules\"]\n}\n</code></pre>\n<h2>总结</h2>\n<p>TypeScript 核心要点：</p>\n<ol>\n<li><strong>类型安全</strong> - 编译时捕获错误</li>\n<li><strong>类型推断</strong> - 智能推导减少冗余</li>\n<li><strong>高级类型</strong> - 泛型、条件类型、映射类型</li>\n<li><strong>渐进式</strong> - 可逐步迁移 JavaScript 项目</li>\n<li><strong>生态丰富</strong> - @types 类型定义库</li>\n</ol>\n"
}