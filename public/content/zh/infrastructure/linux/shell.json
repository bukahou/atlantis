{
  "slug": "shell",
  "meta": {
    "title": "Shell 脚本基础",
    "description": "Linux Shell 脚本入门教程，掌握 Bash 脚本编写技巧",
    "order": 1,
    "tags": [
      "linux",
      "shell",
      "bash"
    ]
  },
  "content": "<h1>Shell 脚本基础</h1>\n<h2>概述</h2>\n<p>Shell 是 Linux 系统的命令行解释器，Bash (Bourne Again Shell) 是最常用的 Shell。掌握 Shell 脚本可以大幅提高运维效率。</p>\n<h2>第一个脚本</h2>\n<p>创建一个简单的 Hello World 脚本：</p>\n<pre><code class=\"language-bash\">#!/bin/bash\n# 这是注释\necho \"Hello, World!\"\n</code></pre>\n<p>保存为 <code>hello.sh</code>，然后执行：</p>\n<pre><code class=\"language-bash\">chmod +x hello.sh\n./hello.sh\n</code></pre>\n<h2>变量</h2>\n<h3>定义变量</h3>\n<pre><code class=\"language-bash\"># 字符串变量\nname=\"Atlantis\"\necho $name\n\n# 数字变量\ncount=10\necho $count\n\n# 命令结果赋值\ncurrent_date=$(date +%Y-%m-%d)\necho \"今天是: $current_date\"\n</code></pre>\n<h3>特殊变量</h3>\n<table>\n<thead>\n<tr>\n<th>变量</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>$0</code></td>\n<td>脚本名称</td>\n</tr>\n<tr>\n<td><code>$1-$9</code></td>\n<td>位置参数</td>\n</tr>\n<tr>\n<td><code>$#</code></td>\n<td>参数个数</td>\n</tr>\n<tr>\n<td><code>$@</code></td>\n<td>所有参数</td>\n</tr>\n<tr>\n<td><code>$?</code></td>\n<td>上一条命令的返回值</td>\n</tr>\n<tr>\n<td><code>$$</code></td>\n<td>当前进程 PID</td>\n</tr>\n</tbody>\n</table>\n<h2>条件判断</h2>\n<h3>if 语句</h3>\n<pre><code class=\"language-bash\">#!/bin/bash\n\nif [ -f \"/etc/passwd\" ]; then\n    echo \"文件存在\"\nelif [ -d \"/etc\" ]; then\n    echo \"目录存在\"\nelse\n    echo \"不存在\"\nfi\n</code></pre>\n<h3>常用判断条件</h3>\n<p><strong>文件判断：</strong></p>\n<ul>\n<li><code>-f file</code> 文件存在且为普通文件</li>\n<li><code>-d dir</code> 目录存在</li>\n<li><code>-r file</code> 文件可读</li>\n<li><code>-w file</code> 文件可写</li>\n<li><code>-x file</code> 文件可执行</li>\n</ul>\n<p><strong>字符串判断：</strong></p>\n<ul>\n<li><code>-z str</code> 字符串为空</li>\n<li><code>-n str</code> 字符串非空</li>\n<li><code>str1 = str2</code> 字符串相等</li>\n</ul>\n<p><strong>数值判断：</strong></p>\n<ul>\n<li><code>-eq</code> 等于</li>\n<li><code>-ne</code> 不等于</li>\n<li><code>-gt</code> 大于</li>\n<li><code>-lt</code> 小于</li>\n</ul>\n<h2>循环</h2>\n<h3>for 循环</h3>\n<pre><code class=\"language-bash\"># 遍历列表\nfor item in apple banana orange; do\n    echo \"水果: $item\"\ndone\n\n# 遍历数字范围\nfor i in {1..5}; do\n    echo \"数字: $i\"\ndone\n\n# C 风格 for 循环\nfor ((i=0; i&#x3C;5; i++)); do\n    echo \"索引: $i\"\ndone\n</code></pre>\n<h3>while 循环</h3>\n<pre><code class=\"language-bash\">count=0\nwhile [ $count -lt 5 ]; do\n    echo \"计数: $count\"\n    ((count++))\ndone\n</code></pre>\n<h2>函数</h2>\n<pre><code class=\"language-bash\">#!/bin/bash\n\n# 定义函数\ngreet() {\n    local name=$1  # 局部变量\n    echo \"你好, $name!\"\n}\n\n# 带返回值的函数\nadd() {\n    local a=$1\n    local b=$2\n    echo $((a + b))\n}\n\n# 调用函数\ngreet \"World\"\nresult=$(add 3 5)\necho \"3 + 5 = $result\"\n</code></pre>\n<h2>实用技巧</h2>\n<h3>错误处理</h3>\n<pre><code class=\"language-bash\">#!/bin/bash\nset -e  # 遇到错误立即退出\nset -u  # 使用未定义变量时报错\nset -o pipefail  # 管道中任一命令失败则整体失败\n\n# 或者合并写法\nset -euo pipefail\n</code></pre>\n<h3>日志输出</h3>\n<pre><code class=\"language-bash\">log() {\n    echo \"[$(date '+%Y-%m-%d %H:%M:%S')] $1\"\n}\n\nlog \"脚本开始执行\"\nlog \"处理完成\"\n</code></pre>\n<h3>读取用户输入</h3>\n<pre><code class=\"language-bash\">read -p \"请输入你的名字: \" username\necho \"你好, $username\"\n\n# 带超时的输入\nread -t 10 -p \"请在10秒内输入: \" answer\n</code></pre>\n<h2>总结</h2>\n<p>Shell 脚本是运维工程师的必备技能。通过本教程，你学习了：</p>\n<ol>\n<li>脚本的基本结构</li>\n<li>变量的使用</li>\n<li>条件判断和循环</li>\n<li>函数定义</li>\n<li>实用技巧</li>\n</ol>\n<p>建议多练习，在实际工作中积累经验。</p>\n"
}