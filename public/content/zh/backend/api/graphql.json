{
  "slug": "graphql",
  "meta": {
    "title": "GraphQL",
    "description": "GraphQL 查询语言与 Schema 设计",
    "order": 2,
    "tags": [
      "API",
      "GraphQL",
      "后端"
    ]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "核心概念",
      "items": [
        "GraphQL 是 API 查询语言",
        "客户端精确指定需要的数据",
        "单一端点，类型系统",
        "避免过度获取和不足获取"
      ]
    },
    {
      "type": "comparison",
      "title": "GraphQL vs REST",
      "columns": [
        {
          "title": "GraphQL",
          "color": "from-pink-500 to-purple-500",
          "items": [
            {
              "label": "端点",
              "description": "单一端点 /graphql"
            },
            {
              "label": "数据获取",
              "description": "客户端指定字段"
            },
            {
              "label": "版本",
              "description": "Schema 演进"
            },
            {
              "label": "缓存",
              "description": "需要额外处理"
            }
          ]
        },
        {
          "title": "REST",
          "color": "from-blue-500 to-cyan-500",
          "items": [
            {
              "label": "端点",
              "description": "多个端点"
            },
            {
              "label": "数据获取",
              "description": "服务端决定"
            },
            {
              "label": "版本",
              "description": "URL 版本号"
            },
            {
              "label": "缓存",
              "description": "HTTP 缓存"
            }
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "Schema 定义",
      "language": "graphql",
      "code": "type User {\n  id: ID!\n  name: String!\n  email: String!\n  posts: [Post!]!\n  createdAt: DateTime!\n}\n\ntype Post {\n  id: ID!\n  title: String!\n  content: String!\n  author: User!\n}\n\ntype Query {\n  user(id: ID!): User\n  users(limit: Int, offset: Int): [User!]!\n  post(id: ID!): Post\n}\n\ntype Mutation {\n  createUser(input: CreateUserInput!): User!\n  updateUser(id: ID!, input: UpdateUserInput!): User!\n  deleteUser(id: ID!): Boolean!\n}\n\ninput CreateUserInput {\n  name: String!\n  email: String!\n}"
    },
    {
      "type": "codeBlock",
      "title": "查询示例",
      "language": "graphql",
      "code": "# 查询用户及其帖子\nquery GetUser($id: ID!) {\n  user(id: $id) {\n    id\n    name\n    email\n    posts {\n      id\n      title\n    }\n  }\n}\n\n# 创建用户\nmutation CreateUser($input: CreateUserInput!) {\n  createUser(input: $input) {\n    id\n    name\n    email\n  }\n}\n\n# 片段复用\nfragment UserFields on User {\n  id\n  name\n  email\n}\n\nquery {\n  user(id: \"1\") {\n    ...UserFields\n  }\n}"
    },
    {
      "type": "cards",
      "title": "核心特性",
      "layout": "grid",
      "columns": 2,
      "items": [
        {
          "title": "类型系统",
          "badge": "Schema",
          "badgeColor": "purple",
          "points": [
            "强类型定义",
            "自动文档生成",
            "编辑器智能提示"
          ]
        },
        {
          "title": "Resolver",
          "badge": "执行",
          "badgeColor": "blue",
          "points": [
            "字段级数据获取",
            "DataLoader 批量加载",
            "N+1 问题解决"
          ]
        },
        {
          "title": "订阅",
          "badge": "实时",
          "badgeColor": "green",
          "points": [
            "WebSocket 推送",
            "实时数据更新",
            "Subscription 类型"
          ]
        },
        {
          "title": "工具生态",
          "badge": "工具",
          "badgeColor": "amber",
          "points": [
            "Apollo Client/Server",
            "GraphQL Playground",
            "Code Generator"
          ]
        }
      ]
    },
    {
      "type": "list",
      "title": "最佳实践",
      "style": "check",
      "items": [
        {
          "label": "使用 DataLoader",
          "description": "批量加载避免 N+1 查询问题"
        },
        {
          "label": "查询复杂度限制",
          "description": "防止恶意深度嵌套查询"
        },
        {
          "label": "持久化查询",
          "description": "生产环境使用预定义查询"
        },
        {
          "label": "错误处理",
          "description": "返回部分数据和错误信息"
        }
      ]
    }
  ],
  "relatedTopics": [
    "REST API",
    "Apollo",
    "实时应用"
  ]
}