{
  "slug": "rabbitmq",
  "meta": {
    "title": "RabbitMQ",
    "description": "可靠的消息代理",
    "order": 2,
    "tags": [
      "消息队列",
      "RabbitMQ",
      "AMQP"
    ]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "核心概念",
      "items": [
        "RabbitMQ 实现 AMQP 协议",
        "Exchange 路由消息到 Queue",
        "灵活的路由规则",
        "支持消息确认和持久化"
      ]
    },
    {
      "type": "cards",
      "title": "Exchange 类型",
      "layout": "grid",
      "columns": 2,
      "items": [
        {
          "title": "Direct",
          "badge": "直连",
          "badgeColor": "blue",
          "points": [
            "精确匹配 routing key",
            "一对一路由",
            "最简单的模式"
          ]
        },
        {
          "title": "Fanout",
          "badge": "广播",
          "badgeColor": "green",
          "points": [
            "忽略 routing key",
            "广播到所有绑定队列",
            "发布订阅模式"
          ]
        },
        {
          "title": "Topic",
          "badge": "主题",
          "badgeColor": "amber",
          "points": [
            "通配符匹配",
            "* 匹配一个词",
            "# 匹配多个词"
          ]
        },
        {
          "title": "Headers",
          "badge": "头部",
          "badgeColor": "purple",
          "points": [
            "基于消息头属性",
            "不使用 routing key",
            "复杂匹配规则"
          ]
        }
      ]
    },
    {
      "type": "flow",
      "title": "消息流程",
      "direction": "horizontal",
      "steps": [
        {
          "label": "Producer",
          "description": "发送消息",
          "color": "bg-blue-500"
        },
        {
          "label": "Exchange",
          "description": "路由消息",
          "color": "bg-purple-500"
        },
        {
          "label": "Queue",
          "description": "存储消息",
          "color": "bg-cyan-500"
        },
        {
          "label": "Consumer",
          "description": "消费消息",
          "color": "bg-green-500"
        }
      ]
    },
    {
      "type": "table",
      "title": "可靠性保障",
      "highlightFirst": true,
      "headers": [
        "机制",
        "说明"
      ],
      "rows": [
        [
          "持久化",
          "Exchange/Queue/Message 都可持久化"
        ],
        [
          "发布确认",
          "Publisher Confirms 确认送达 Broker"
        ],
        [
          "消费确认",
          "Consumer Ack 确认处理完成"
        ],
        [
          "死信队列",
          "处理失败消息的兜底队列"
        ]
      ]
    },
    {
      "type": "list",
      "title": "最佳实践",
      "style": "check",
      "items": [
        {
          "label": "启用持久化",
          "description": "Queue 和 Message 都设置持久化"
        },
        {
          "label": "手动确认",
          "description": "处理完成后再 Ack，避免消息丢失"
        },
        {
          "label": "死信队列",
          "description": "配置 DLX 处理失败消息"
        },
        {
          "label": "连接池",
          "description": "复用连接和通道，减少开销"
        }
      ]
    }
  ],
  "relatedTopics": [
    "消息队列",
    "AMQP",
    "微服务"
  ]
}