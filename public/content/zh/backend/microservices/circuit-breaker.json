{
  "slug": "circuit-breaker",
  "meta": {
    "title": "熔断器模式",
    "description": "服务容错与弹性设计",
    "order": 3,
    "tags": [
      "微服务",
      "熔断",
      "容错"
    ]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "核心概念",
      "items": [
        "熔断器防止级联故障",
        "三种状态：关闭、打开、半开",
        "失败率超阈值时触发熔断",
        "自动恢复机制"
      ]
    },
    {
      "type": "flow",
      "title": "熔断器状态机",
      "subtitle": "状态转换流程",
      "direction": "horizontal",
      "steps": [
        {
          "label": "Closed",
          "description": "正常通过",
          "color": "bg-green-500"
        },
        {
          "label": "Open",
          "description": "快速失败",
          "color": "bg-red-500"
        },
        {
          "label": "Half-Open",
          "description": "试探恢复",
          "color": "bg-amber-500"
        }
      ]
    },
    {
      "type": "cards",
      "title": "容错策略",
      "layout": "grid",
      "columns": 2,
      "items": [
        {
          "title": "熔断",
          "badge": "Circuit Breaker",
          "badgeColor": "red",
          "points": [
            "失败率超阈值触发",
            "快速失败不等待",
            "自动恢复"
          ]
        },
        {
          "title": "重试",
          "badge": "Retry",
          "badgeColor": "blue",
          "points": [
            "暂时性故障重试",
            "指数退避",
            "最大重试次数"
          ]
        },
        {
          "title": "超时",
          "badge": "Timeout",
          "badgeColor": "amber",
          "points": [
            "避免无限等待",
            "快速释放资源",
            "合理超时设置"
          ]
        },
        {
          "title": "降级",
          "badge": "Fallback",
          "badgeColor": "purple",
          "points": [
            "失败时返回默认",
            "缓存数据兜底",
            "保证核心功能"
          ]
        }
      ]
    },
    {
      "type": "comparison",
      "title": "主流实现",
      "columns": [
        {
          "title": "Resilience4j",
          "color": "from-green-500 to-emerald-500",
          "items": [
            {
              "label": "语言",
              "description": "Java"
            },
            {
              "label": "特点",
              "description": "轻量、函数式"
            },
            {
              "label": "功能",
              "description": "熔断/限流/重试"
            }
          ]
        },
        {
          "title": "Sentinel",
          "color": "from-blue-500 to-cyan-500",
          "items": [
            {
              "label": "语言",
              "description": "Java/Go"
            },
            {
              "label": "特点",
              "description": "阿里开源"
            },
            {
              "label": "功能",
              "description": "流控/熔断/热点"
            }
          ]
        }
      ]
    },
    {
      "type": "table",
      "title": "熔断器参数",
      "highlightFirst": true,
      "headers": [
        "参数",
        "说明",
        "推荐值"
      ],
      "rows": [
        [
          "failureRateThreshold",
          "失败率阈值",
          "50%"
        ],
        [
          "slowCallRateThreshold",
          "慢调用率阈值",
          "100%"
        ],
        [
          "slowCallDurationThreshold",
          "慢调用时间",
          "2s"
        ],
        [
          "waitDurationInOpenState",
          "熔断等待时间",
          "60s"
        ],
        [
          "permittedNumberOfCallsInHalfOpenState",
          "半开状态请求数",
          "10"
        ]
      ]
    },
    {
      "type": "list",
      "title": "最佳实践",
      "style": "check",
      "items": [
        {
          "label": "合理阈值",
          "description": "根据业务特性设置失败率阈值"
        },
        {
          "label": "降级方案",
          "description": "为关键接口准备降级返回"
        },
        {
          "label": "监控告警",
          "description": "熔断触发时及时告警"
        },
        {
          "label": "避免过度保护",
          "description": "不是所有接口都需要熔断"
        }
      ]
    }
  ],
  "relatedTopics": [
    "微服务",
    "服务网格",
    "可观测性"
  ]
}