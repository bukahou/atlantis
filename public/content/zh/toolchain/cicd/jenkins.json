{
  "slug": "jenkins",
  "meta": {
    "title": "Jenkins",
    "description": "Jenkins 持续集成、Pipeline 与自动化部署",
    "order": 2,
    "tags": [
      "Jenkins",
      "CI/CD",
      "Pipeline"
    ]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "核心概念",
      "items": [
        "Jenkins 是开源的自动化服务器",
        "Master-Agent 分布式架构",
        "Pipeline 代码即配置",
        "丰富的插件生态"
      ]
    },
    {
      "type": "comparison",
      "title": "Pipeline 类型",
      "columns": [
        {
          "title": "声明式",
          "color": "from-blue-500 to-cyan-500",
          "items": [
            {
              "label": "语法",
              "description": "pipeline { }"
            },
            {
              "label": "特点",
              "description": "结构清晰、易读"
            },
            {
              "label": "适用",
              "description": "标准 CI/CD 流程"
            }
          ]
        },
        {
          "title": "脚本式",
          "color": "from-green-500 to-emerald-500",
          "items": [
            {
              "label": "语法",
              "description": "node { }"
            },
            {
              "label": "特点",
              "description": "灵活、Groovy 语法"
            },
            {
              "label": "适用",
              "description": "复杂逻辑"
            }
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "声明式 Pipeline",
      "language": "groovy",
      "code": "pipeline {\n    agent any\n    \n    environment {\n        GO_VERSION = '1.21'\n    }\n    \n    stages {\n        stage('Build') {\n            steps {\n                sh 'go build -o app ./...'\n            }\n        }\n        \n        stage('Test') {\n            steps {\n                sh 'go test -v ./...'\n            }\n        }\n        \n        stage('Deploy') {\n            when { branch 'main' }\n            steps {\n                sh 'make deploy'\n            }\n        }\n    }\n    \n    post {\n        success { echo 'Build succeeded!' }\n        failure { echo 'Build failed!' }\n    }\n}"
    },
    {
      "type": "codeBlock",
      "title": "并行构建",
      "language": "groovy",
      "code": "stage('Parallel Tests') {\n    parallel {\n        stage('Unit Tests') {\n            steps { sh 'go test ./pkg/...' }\n        }\n        stage('Integration Tests') {\n            steps { sh 'go test ./integration/...' }\n        }\n    }\n}\n\nstage('Build Matrix') {\n    matrix {\n        axes {\n            axis { name 'PLATFORM'; values 'linux', 'darwin' }\n            axis { name 'ARCH'; values 'amd64', 'arm64' }\n        }\n        stages {\n            stage('Build') {\n                steps {\n                    sh \"GOOS=${PLATFORM} GOARCH=${ARCH} go build\"\n                }\n            }\n        }\n    }\n}"
    },
    {
      "type": "table",
      "title": "凭据类型",
      "highlightFirst": true,
      "headers": [
        "类型",
        "用途",
        "使用方式"
      ],
      "rows": [
        [
          "usernamePassword",
          "用户名密码",
          "DOCKER_USER/DOCKER_PASS"
        ],
        [
          "sshUserPrivateKey",
          "SSH 密钥",
          "keyFileVariable"
        ],
        [
          "file",
          "文件",
          "KUBECONFIG"
        ],
        [
          "string",
          "密钥字符串",
          "API_KEY"
        ]
      ]
    },
    {
      "type": "list",
      "title": "最佳实践",
      "style": "check",
      "items": [
        {
          "label": "声明式优先",
          "description": "结构清晰，易于维护"
        },
        {
          "label": "共享库",
          "description": "复用构建逻辑"
        },
        {
          "label": "凭据管理",
          "description": "使用 Jenkins 凭据存储"
        },
        {
          "label": "分布式构建",
          "description": "Agent 分担负载"
        }
      ]
    }
  ],
  "relatedTopics": [
    "GitHub Actions",
    "Docker",
    "Kubernetes"
  ]
}