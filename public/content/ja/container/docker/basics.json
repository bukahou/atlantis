{
  "slug": "basics",
  "meta": {
    "title": "Docker 基礎入門",
    "description": "Docker コンテナ技術のコア概念と基本操作",
    "order": 1,
    "tags": [
      "docker",
      "container",
      "devops"
    ]
  },
  "content": "<h1>Docker 基礎入門</h1>\n<h2>Docker とは</h2>\n<p>Docker はオープンソースのコンテナ化プラットフォームで、アプリケーションとその依存関係をポータブルなコンテナにパッケージ化し、「一度ビルドすれば、どこでも実行」を実現します。</p>\n<h3>コア概念</h3>\n<table>\n<thead>\n<tr>\n<th>概念</th>\n<th>説明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>イメージ (Image)</strong></td>\n<td>読み取り専用テンプレート、アプリ実行に必要なすべてを含む</td>\n</tr>\n<tr>\n<td><strong>コンテナ (Container)</strong></td>\n<td>イメージの実行インスタンス、相互に分離</td>\n</tr>\n<tr>\n<td><strong>レジストリ (Registry)</strong></td>\n<td>イメージを保存・配布するサービス</td>\n</tr>\n<tr>\n<td><strong>Dockerfile</strong></td>\n<td>イメージのビルド手順を定義するテキストファイル</td>\n</tr>\n</tbody>\n</table>\n<h2>Docker のインストール</h2>\n<h3>Ubuntu/Debian</h3>\n<pre><code class=\"language-bash\"># パッケージインデックスを更新\nsudo apt update\n\n# 依存関係をインストール\nsudo apt install -y ca-certificates curl gnupg\n\n# Docker 公式 GPG キーを追加\nsudo install -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n\n# リポジトリを設定\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(. /etc/os-release &#x26;&#x26; echo \"$VERSION_CODENAME\") stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n\n# Docker をインストール\nsudo apt update\nsudo apt install -y docker-ce docker-ce-cli containerd.io\n\n# 現在のユーザーを docker グループに追加\nsudo usermod -aG docker $USER\n</code></pre>\n<h3>インストールの確認</h3>\n<pre><code class=\"language-bash\">docker --version\ndocker run hello-world\n</code></pre>\n<h2>イメージ操作</h2>\n<h3>イメージの取得</h3>\n<pre><code class=\"language-bash\"># 公式イメージを取得\ndocker pull nginx\ndocker pull nginx:1.25\n\n# 指定レジストリからイメージを取得\ndocker pull registry.example.com/myapp:v1\n</code></pre>\n<h3>イメージの確認</h3>\n<pre><code class=\"language-bash\"># ローカルイメージを一覧表示\ndocker images\n\n# イメージの詳細を確認\ndocker inspect nginx\n\n# イメージのビルド履歴を確認\ndocker history nginx\n</code></pre>\n<h3>イメージの削除</h3>\n<pre><code class=\"language-bash\"># 指定イメージを削除\ndocker rmi nginx\n\n# 未使用イメージを削除\ndocker image prune\n\n# すべてのイメージを強制削除\ndocker rmi -f $(docker images -q)\n</code></pre>\n<h2>コンテナ操作</h2>\n<h3>コンテナの作成と実行</h3>\n<pre><code class=\"language-bash\"># 基本実行\ndocker run nginx\n\n# バックグラウンド実行\ndocker run -d nginx\n\n# 名前を指定\ndocker run -d --name my-nginx nginx\n\n# ポートマッピング\ndocker run -d -p 8080:80 nginx\n\n# ディレクトリマウント\ndocker run -d -v /host/path:/container/path nginx\n\n# 環境変数を設定\ndocker run -d -e MYSQL_ROOT_PASSWORD=secret mysql\n</code></pre>\n<h3>コンテナ管理</h3>\n<pre><code class=\"language-bash\"># 実行中のコンテナを表示\ndocker ps\n\n# すべてのコンテナを表示\ndocker ps -a\n\n# コンテナを停止\ndocker stop my-nginx\n\n# 停止したコンテナを起動\ndocker start my-nginx\n\n# コンテナを再起動\ndocker restart my-nginx\n\n# コンテナを削除\ndocker rm my-nginx\n\n# 実行中のコンテナを強制削除\ndocker rm -f my-nginx\n</code></pre>\n<h3>コンテナに入る</h3>\n<pre><code class=\"language-bash\"># コマンドを実行\ndocker exec my-nginx ls /etc/nginx\n\n# 対話式シェル\ndocker exec -it my-nginx /bin/bash\n\n# ログを確認\ndocker logs my-nginx\ndocker logs -f my-nginx  # 継続出力\n</code></pre>\n<h2>Dockerfile</h2>\n<h3>基本構造</h3>\n<pre><code class=\"language-dockerfile\"># ベースイメージ\nFROM node:18-alpine\n\n# 作業ディレクトリを設定\nWORKDIR /app\n\n# 依存ファイルをコピー\nCOPY package*.json ./\n\n# 依存関係をインストール\nRUN npm install\n\n# ソースコードをコピー\nCOPY . .\n\n# アプリをビルド\nRUN npm run build\n\n# ポートを公開\nEXPOSE 3000\n\n# 起動コマンド\nCMD [\"npm\", \"start\"]\n</code></pre>\n<h3>よく使う命令</h3>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>説明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>FROM</code></td>\n<td>ベースイメージを指定</td>\n</tr>\n<tr>\n<td><code>WORKDIR</code></td>\n<td>作業ディレクトリを設定</td>\n</tr>\n<tr>\n<td><code>COPY</code></td>\n<td>ファイルをイメージにコピー</td>\n</tr>\n<tr>\n<td><code>ADD</code></td>\n<td>ファイルをコピー、URL と解凍に対応</td>\n</tr>\n<tr>\n<td><code>RUN</code></td>\n<td>ビルド時にコマンドを実行</td>\n</tr>\n<tr>\n<td><code>CMD</code></td>\n<td>コンテナ起動時のデフォルトコマンド</td>\n</tr>\n<tr>\n<td><code>ENTRYPOINT</code></td>\n<td>コンテナ起動のエントリポイント</td>\n</tr>\n<tr>\n<td><code>ENV</code></td>\n<td>環境変数を設定</td>\n</tr>\n<tr>\n<td><code>EXPOSE</code></td>\n<td>ポートを宣言</td>\n</tr>\n<tr>\n<td><code>VOLUME</code></td>\n<td>マウントポイントを宣言</td>\n</tr>\n</tbody>\n</table>\n<h3>イメージをビルド</h3>\n<pre><code class=\"language-bash\"># 基本ビルド\ndocker build -t myapp:v1 .\n\n# Dockerfile を指定\ndocker build -f Dockerfile.prod -t myapp:prod .\n\n# キャッシュを使用しない\ndocker build --no-cache -t myapp:v1 .\n</code></pre>\n<h2>ベストプラクティス</h2>\n<h3>イメージの最適化</h3>\n<pre><code class=\"language-dockerfile\"># マルチステージビルドを使用\nFROM node:18 AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install\nCOPY . .\nRUN npm run build\n\nFROM node:18-alpine\nWORKDIR /app\nCOPY --from=builder /app/dist ./dist\nCOPY --from=builder /app/node_modules ./node_modules\nCMD [\"node\", \"dist/index.js\"]\n</code></pre>\n<h3>.dockerignore</h3>\n<pre><code>node_modules\n.git\n.env\n*.log\nDockerfile\ndocker-compose.yml\n</code></pre>\n<h2>よく使うコマンド一覧</h2>\n<pre><code class=\"language-bash\"># システム情報\ndocker info\ndocker version\n\n# リソースをクリーンアップ\ndocker system prune        # 未使用リソースをクリーンアップ\ndocker system prune -a     # すべての未使用リソースをクリーンアップ\n\n# リソース使用量を確認\ndocker stats\n\n# イメージのエクスポート/インポート\ndocker save -o image.tar myapp:v1\ndocker load -i image.tar\n</code></pre>\n<h2>まとめ</h2>\n<p>Docker は現代のアプリケーションデプロイの基盤技術です：</p>\n<ol>\n<li><strong>イメージ</strong>はアプリのパッケージ形式</li>\n<li><strong>コンテナ</strong>はイメージの実行インスタンス</li>\n<li><strong>Dockerfile</strong> はイメージのビルドプロセスを定義</li>\n<li>ポートマッピングとボリュームマウントでホストと連携</li>\n</ol>\n<p>これらの基礎をマスターしたら、Docker Compose と Kubernetes の学習に進みましょう。</p>\n"
}