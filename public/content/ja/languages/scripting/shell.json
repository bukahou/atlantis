{
  "slug": "shell",
  "meta": {
    "title": "Shell スクリプト基礎",
    "description": "Bash/Shell スクリプトプログラミング、よく使うコマンドと自動化運用",
    "order": 2,
    "tags": [
      "Shell",
      "Bash",
      "自動化"
    ]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "コアコンセプト",
      "items": [
        "Shell はオペレーティングシステムのコマンドラインインタプリタ",
        "Bash は最も広く使われている Shell",
        "パイプ機構でコマンドの組み合わせを実現",
        "システム管理と自動化運用で広く利用"
      ]
    },
    {
      "type": "codeBlock",
      "title": "基本構文",
      "language": "bash",
      "code": "#!/bin/bash\n\n# 変数\nNAME=\"Shell\"\nVERSION=5\necho \"Welcome to $NAME\"\necho \"Version: ${VERSION}\"\n\n# コマンド実行\ncurrent_date=$(date +%Y-%m-%d)\nfile_count=`ls | wc -l`\n\n# 配列\narr=(a b c d e)\necho ${arr[0]}       # 最初の要素\necho ${arr[@]}       # 全要素\necho ${#arr[@]}      # 長さ"
    },
    {
      "type": "cards",
      "title": "特殊変数",
      "layout": "grid",
      "columns": 3,
      "items": [
        {
          "title": "位置パラメータ",
          "badge": "$1-$9",
          "badgeColor": "blue",
          "points": [
            "$0 スクリプト名",
            "$1 $2 引数",
            "$# 引数の数"
          ]
        },
        {
          "title": "ステータス変数",
          "badge": "$?",
          "badgeColor": "green",
          "points": [
            "$? 終了ステータス",
            "$$ 現在の PID",
            "$! バックグラウンド PID"
          ]
        },
        {
          "title": "引数リスト",
          "badge": "$@",
          "badgeColor": "purple",
          "points": [
            "$@ 独立した文字列",
            "$* 単一の文字列",
            "$_ 前の引数"
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "制御フロー",
      "language": "bash",
      "code": "# 条件分岐\nif [[ \"$name\" == \"Alice\" && \"$age\" -gt 20 ]]; then\n    echo \"Match\"\nfi\n\n# ファイルテスト\nif [[ -f \"$file\" ]]; then echo \"ファイル\"; fi\nif [[ -d \"$dir\" ]]; then echo \"ディレクトリ\"; fi\n\n# ループ\nfor i in {1..10}; do\n    echo $i\ndone\n\nwhile IFS= read -r line; do\n    echo \"$line\"\ndone < file.txt\n\n# case 文\ncase \"$option\" in\n    start) echo \"Starting...\" ;;\n    stop) echo \"Stopping...\" ;;\n    *) echo \"Unknown\" ;;\nesac"
    },
    {
      "type": "comparison",
      "title": "テキスト処理三銃士",
      "columns": [
        {
          "title": "grep",
          "color": "from-blue-500 to-cyan-500",
          "items": [
            {
              "label": "用途",
              "description": "テキスト検索"
            },
            {
              "label": "よく使う",
              "description": "-i -r -n -v"
            }
          ]
        },
        {
          "title": "sed",
          "color": "from-green-500 to-emerald-500",
          "items": [
            {
              "label": "用途",
              "description": "ストリーム編集"
            },
            {
              "label": "よく使う",
              "description": "s/old/new/g"
            }
          ]
        },
        {
          "title": "awk",
          "color": "from-purple-500 to-pink-500",
          "items": [
            {
              "label": "用途",
              "description": "カラム処理"
            },
            {
              "label": "よく使う",
              "description": "{print $1}"
            }
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "パイプとリダイレクト",
      "language": "bash",
      "code": "# パイプ\ncat file | grep \"pattern\" | sort | uniq\nps aux | grep nginx\n\n# 出力リダイレクト\ncommand > file      # 上書き\ncommand >> file     # 追記\ncommand 2>&1        # エラーリダイレクト\ncommand &> /dev/null  # 破棄\n\n# xargs\nfind . -name \"*.log\" | xargs rm\nfind . -name \"*.txt\" | xargs -I {} cp {} backup/"
    },
    {
      "type": "codeBlock",
      "title": "エラーハンドリングテンプレート",
      "language": "bash",
      "code": "#!/bin/bash\nset -e          # エラー時に終了\nset -u          # 未定義変数でエラー\nset -o pipefail # パイプのエラー検出\n\n# クリーンアップ関数\ncleanup() { rm -f \"$temp_file\"; }\ntrap cleanup EXIT\n\n# エラー処理\nerror_exit() {\n    echo \"Error: $1\" >&2\n    exit 1\n}\n\ncommand || error_exit \"Command failed\""
    },
    {
      "type": "list",
      "title": "ベストプラクティス",
      "style": "check",
      "items": [
        {
          "label": "[[ ]] を使用",
          "description": "[ ] より安全で強力"
        },
        {
          "label": "set -euo pipefail",
          "description": "厳格なエラーハンドリング"
        },
        {
          "label": "trap でクリーンアップ",
          "description": "終了時のリソース解放を確保"
        },
        {
          "label": "ShellCheck",
          "description": "静的解析ツールを使用"
        }
      ]
    }
  ],
  "relatedTopics": [
    "Python",
    "Linux",
    "DevOps"
  ]
}