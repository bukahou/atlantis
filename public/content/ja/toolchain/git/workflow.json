{
  "slug": "workflow",
  "meta": {
    "title": "Git ワークフロー",
    "description": "Git ブランチ戦略とチーム協力ワークフロー",
    "order": 1,
    "tags": [
      "git",
      "workflow",
      "collaboration"
    ]
  },
  "content": "<h1>Git ワークフロー</h1>\n<h2>基礎概念</h2>\n<h3>作業領域</h3>\n<pre><code>┌─────────────────────────────────────────────────────────┐\n│  作業ディレクトリ    ステージ         ローカルリポジトリ  │\n│  (Working)         (Staging)        (Repository)       │\n│                                                         │\n│     ファイル ──add──> ステージ ──commit──> コミット履歴  │\n│                                                         │\n└─────────────────────────────────────────────────────────┘\n</code></pre>\n<h3>よく使うコマンド</h3>\n<pre><code class=\"language-bash\"># 状態を確認\ngit status\n\n# ステージに追加\ngit add file.txt\ngit add .              # すべてのファイルを追加\n\n# コミット\ngit commit -m \"feat: add new feature\"\n\n# 履歴を確認\ngit log\ngit log --oneline --graph\n</code></pre>\n<h2>ブランチ管理</h2>\n<h3>ブランチ操作</h3>\n<pre><code class=\"language-bash\"># ブランチを確認\ngit branch            # ローカルブランチ\ngit branch -r         # リモートブランチ\ngit branch -a         # すべてのブランチ\n\n# ブランチを作成\ngit branch feature/login\n\n# ブランチを切り替え\ngit checkout feature/login\ngit switch feature/login      # Git 2.23+\n\n# 作成と切り替えを同時に\ngit checkout -b feature/login\ngit switch -c feature/login   # Git 2.23+\n\n# ブランチを削除\ngit branch -d feature/login   # マージ済みブランチ\ngit branch -D feature/login   # 強制削除\n</code></pre>\n<h3>マージとリベース</h3>\n<pre><code class=\"language-bash\"># ブランチをマージ\ngit checkout main\ngit merge feature/login\n\n# リベース (線形履歴を維持)\ngit checkout feature/login\ngit rebase main\n\n# インタラクティブリベース (コミット整理)\ngit rebase -i HEAD~3\n</code></pre>\n<h2>Git Flow ワークフロー</h2>\n<h3>ブランチモデル</h3>\n<pre><code>main        ●────────────────●────────────────●\n             \\              /                /\nrelease       \\    ●───●───●                /\n               \\  /                        /\ndevelop    ●────●────●────●────●────●────●\n            \\       /      \\      /\nfeature      ●─●─●─●        ●─●─●\n</code></pre>\n<h3>ブランチ説明</h3>\n<table>\n<thead>\n<tr>\n<th>ブランチ</th>\n<th>用途</th>\n<th>ライフサイクル</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>main</code></td>\n<td>本番コード</td>\n<td>永続</td>\n</tr>\n<tr>\n<td><code>develop</code></td>\n<td>開発メインライン</td>\n<td>永続</td>\n</tr>\n<tr>\n<td><code>feature/*</code></td>\n<td>新機能開発</td>\n<td>一時的</td>\n</tr>\n<tr>\n<td><code>release/*</code></td>\n<td>リリース準備</td>\n<td>一時的</td>\n</tr>\n<tr>\n<td><code>hotfix/*</code></td>\n<td>緊急修正</td>\n<td>一時的</td>\n</tr>\n</tbody>\n</table>\n<h3>ワークフロー</h3>\n<pre><code class=\"language-bash\"># 1. 新機能を開始\ngit checkout develop\ngit checkout -b feature/user-auth\n\n# 2. 開発完了後にマージ\ngit checkout develop\ngit merge --no-ff feature/user-auth\ngit branch -d feature/user-auth\n\n# 3. リリース準備\ngit checkout -b release/v1.0.0 develop\n# ... テストと修正 ...\ngit checkout main\ngit merge --no-ff release/v1.0.0\ngit tag -a v1.0.0 -m \"Release v1.0.0\"\n\n# 4. 緊急修正\ngit checkout -b hotfix/critical-bug main\n# ... 修正 ...\ngit checkout main\ngit merge --no-ff hotfix/critical-bug\ngit checkout develop\ngit merge --no-ff hotfix/critical-bug\n</code></pre>\n<h2>GitHub Flow</h2>\n<p>よりシンプルなワークフロー、継続的デプロイに適合。</p>\n<pre><code>main     ●────●────●────●────●\n          \\  /      \\  /\nfeature    ●─●        ●─●\n</code></pre>\n<h3>フロー</h3>\n<ol>\n<li><code>main</code> から機能ブランチを作成</li>\n<li>開発してコミット</li>\n<li>Pull Request を作成</li>\n<li>コードレビュー</li>\n<li><code>main</code> にマージ</li>\n<li>自動デプロイ</li>\n</ol>\n<pre><code class=\"language-bash\"># 1. ブランチを作成\ngit checkout -b feature/add-login\n\n# 2. 開発してコミット\ngit add .\ngit commit -m \"feat: implement login page\"\n\n# 3. プッシュして PR を作成\ngit push -u origin feature/add-login\n# GitHub で Pull Request を作成\n\n# 4. マージ後にブランチを削除\ngit checkout main\ngit pull\ngit branch -d feature/add-login\n</code></pre>\n<h2>コミット規約</h2>\n<h3>Conventional Commits</h3>\n<pre><code>&#x3C;type>(&#x3C;scope>): &#x3C;subject>\n\n&#x3C;body>\n\n&#x3C;footer>\n</code></pre>\n<h3>Type 種類</h3>\n<table>\n<thead>\n<tr>\n<th>Type</th>\n<th>説明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>feat</code></td>\n<td>新機能</td>\n</tr>\n<tr>\n<td><code>fix</code></td>\n<td>バグ修正</td>\n</tr>\n<tr>\n<td><code>docs</code></td>\n<td>ドキュメント更新</td>\n</tr>\n<tr>\n<td><code>style</code></td>\n<td>コードフォーマット (機能に影響なし)</td>\n</tr>\n<tr>\n<td><code>refactor</code></td>\n<td>リファクタリング</td>\n</tr>\n<tr>\n<td><code>perf</code></td>\n<td>パフォーマンス改善</td>\n</tr>\n<tr>\n<td><code>test</code></td>\n<td>テスト関連</td>\n</tr>\n<tr>\n<td><code>chore</code></td>\n<td>ビルド/ツール変更</td>\n</tr>\n</tbody>\n</table>\n<h3>例</h3>\n<pre><code class=\"language-bash\">git commit -m \"feat(auth): add OAuth2 login support\"\ngit commit -m \"fix(api): handle null response correctly\"\ngit commit -m \"docs: update API documentation\"\n</code></pre>\n<h2>リモート協力</h2>\n<h3>リモートリポジトリ</h3>\n<pre><code class=\"language-bash\"># リモートを追加\ngit remote add origin git@github.com:user/repo.git\n\n# リモートを確認\ngit remote -v\n\n# プッシュ\ngit push origin main\ngit push -u origin feature/login  # 上流ブランチを設定\n\n# プル\ngit pull origin main\ngit fetch origin                   # 取得のみ、マージしない\n</code></pre>\n<h3>コンフリクトの解決</h3>\n<pre><code class=\"language-bash\"># 1. 最新コードをプル\ngit pull origin main\n\n# 2. コンフリクトがある場合、手動で解決\n# コンフリクトファイルを編集し、必要なコードを保持\n\n# 3. 解決済みとしてマーク\ngit add conflicted-file.txt\n\n# 4. マージ/リベースを続行\ngit commit -m \"resolve merge conflict\"\n# または\ngit rebase --continue\n</code></pre>\n<h2>実用テクニック</h2>\n<h3>作業を一時保存</h3>\n<pre><code class=\"language-bash\"># 現在の変更を一時保存\ngit stash\n\n# 一時保存リストを確認\ngit stash list\n\n# 一時保存を復元\ngit stash pop          # 復元して削除\ngit stash apply        # 復元して保持\n\n# 一時保存をクリア\ngit stash drop\ngit stash clear\n</code></pre>\n<h3>操作を取り消し</h3>\n<pre><code class=\"language-bash\"># 作業ディレクトリの変更を取り消し\ngit checkout -- file.txt\ngit restore file.txt        # Git 2.23+\n\n# ステージングを取り消し\ngit reset HEAD file.txt\ngit restore --staged file.txt\n\n# コミットを取り消し (変更を保持)\ngit reset --soft HEAD~1\n\n# コミットを取り消し (変更を破棄)\ngit reset --hard HEAD~1\n\n# 最後のコミットを修正\ngit commit --amend\n</code></pre>\n<h3>差分を確認</h3>\n<pre><code class=\"language-bash\"># 作業ディレクトリとステージ\ngit diff\n\n# ステージと最新コミット\ngit diff --staged\n\n# 2つのコミット間\ngit diff commit1 commit2\n\n# 2つのブランチ間\ngit diff main..feature/login\n</code></pre>\n<h2>まとめ</h2>\n<p>適切なワークフローを選択：</p>\n<table>\n<thead>\n<tr>\n<th>シナリオ</th>\n<th>推奨ワークフロー</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>小チーム/高速イテレーション</td>\n<td>GitHub Flow</td>\n</tr>\n<tr>\n<td>バージョンリリース/複数環境</td>\n<td>Git Flow</td>\n</tr>\n<tr>\n<td>個人プロジェクト</td>\n<td>トランクベース開発</td>\n</tr>\n</tbody>\n</table>\n<p>重要な原則：</p>\n<ol>\n<li><strong>頻繁にコミット</strong>：小さなステップでコミット、追跡しやすく</li>\n<li><strong>明確なコミットメッセージ</strong>：規約に従う</li>\n<li><strong>ブランチ分離</strong>：機能を独立して開発</li>\n<li><strong>コードレビュー</strong>：PR で品質を保証</li>\n</ol>\n"
}