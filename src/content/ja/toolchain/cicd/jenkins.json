{
  "meta": {
    "title": "Jenkins",
    "description": "Jenkins 継続的インテグレーション、Pipeline と自動化デプロイ",
    "order": 2,
    "tags": ["Jenkins", "CI/CD", "Pipeline"]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "コアコンセプト",
      "items": [
        "Jenkins はオープンソースの自動化サーバー",
        "Master-Agent 分散アーキテクチャ",
        "Pipeline コード as 設定",
        "豊富なプラグインエコシステム"
      ]
    },
    {
      "type": "comparison",
      "title": "Pipeline タイプ",
      "columns": [
        {
          "title": "宣言型",
          "color": "from-blue-500 to-cyan-500",
          "items": [
            { "label": "構文", "description": "pipeline { }" },
            { "label": "特徴", "description": "構造が明確、読みやすい" },
            { "label": "適用", "description": "標準 CI/CD フロー" }
          ]
        },
        {
          "title": "スクリプト型",
          "color": "from-green-500 to-emerald-500",
          "items": [
            { "label": "構文", "description": "node { }" },
            { "label": "特徴", "description": "柔軟、Groovy 構文" },
            { "label": "適用", "description": "複雑なロジック" }
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "宣言型 Pipeline",
      "language": "groovy",
      "code": "pipeline {\n    agent any\n    \n    environment {\n        GO_VERSION = '1.21'\n    }\n    \n    stages {\n        stage('Build') {\n            steps {\n                sh 'go build -o app ./...'\n            }\n        }\n        \n        stage('Test') {\n            steps {\n                sh 'go test -v ./...'\n            }\n        }\n        \n        stage('Deploy') {\n            when { branch 'main' }\n            steps {\n                sh 'make deploy'\n            }\n        }\n    }\n    \n    post {\n        success { echo 'Build succeeded!' }\n        failure { echo 'Build failed!' }\n    }\n}"
    },
    {
      "type": "codeBlock",
      "title": "並列ビルド",
      "language": "groovy",
      "code": "stage('Parallel Tests') {\n    parallel {\n        stage('Unit Tests') {\n            steps { sh 'go test ./pkg/...' }\n        }\n        stage('Integration Tests') {\n            steps { sh 'go test ./integration/...' }\n        }\n    }\n}\n\nstage('Build Matrix') {\n    matrix {\n        axes {\n            axis { name 'PLATFORM'; values 'linux', 'darwin' }\n            axis { name 'ARCH'; values 'amd64', 'arm64' }\n        }\n        stages {\n            stage('Build') {\n                steps {\n                    sh \"GOOS=${PLATFORM} GOARCH=${ARCH} go build\"\n                }\n            }\n        }\n    }\n}"
    },
    {
      "type": "table",
      "title": "クレデンシャルタイプ",
      "highlightFirst": true,
      "headers": ["タイプ", "用途", "使用方法"],
      "rows": [
        ["usernamePassword", "ユーザー名パスワード", "DOCKER_USER/DOCKER_PASS"],
        ["sshUserPrivateKey", "SSH 鍵", "keyFileVariable"],
        ["file", "ファイル", "KUBECONFIG"],
        ["string", "シークレット文字列", "API_KEY"]
      ]
    },
    {
      "type": "list",
      "title": "ベストプラクティス",
      "style": "check",
      "items": [
        { "label": "宣言型優先", "description": "構造が明確で保守しやすい" },
        { "label": "共有ライブラリ", "description": "ビルドロジックの再利用" },
        { "label": "クレデンシャル管理", "description": "Jenkins クレデンシャルストアを使用" },
        { "label": "分散ビルド", "description": "Agent で負荷分散" }
      ]
    }
  ],
  "relatedTopics": ["GitHub Actions", "Docker", "Kubernetes"]
}
