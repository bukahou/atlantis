{
  "meta": {
    "title": "ブランチ戦略",
    "description": "Git ブランチ管理戦略と実践",
    "order": 2,
    "tags": ["Git", "ブランチ", "戦略", "コラボレーション"]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "コア概念",
      "items": [
        "ブランチ戦略がコード管理とリリースフローを決定",
        "チーム規模によって適切な戦略が異なる",
        "ブランチ命名規則がコラボレーション効率を向上",
        "保護ブランチでメインコードの品質を確保"
      ]
    },
    {
      "type": "cards",
      "title": "主要ブランチ戦略",
      "layout": "grid",
      "columns": 2,
      "items": [
        {
          "title": "Git Flow",
          "badge": "クラシック",
          "badgeColor": "blue",
          "points": [
            "main：本番環境コード",
            "develop：開発メイン",
            "feature/*：機能ブランチ",
            "release/*：リリース準備",
            "hotfix/*：緊急修正"
          ]
        },
        {
          "title": "GitHub Flow",
          "badge": "シンプル",
          "badgeColor": "green",
          "points": [
            "main：常にデプロイ可能",
            "feature/*：全ての変更",
            "PR レビュー後にマージ",
            "マージ即デプロイ"
          ]
        },
        {
          "title": "GitLab Flow",
          "badge": "ハイブリッド",
          "badgeColor": "orange",
          "points": [
            "main：開発メイン",
            "環境ブランチ：pre-production/production",
            "機能ブランチ + MR",
            "段階的マージリリース"
          ]
        },
        {
          "title": "Trunk Based",
          "badge": "アジャイル",
          "badgeColor": "purple",
          "points": [
            "main：唯一の長期ブランチ",
            "短命ブランチ",
            "頻繁な統合（毎日）",
            "Feature Flag で制御"
          ]
        }
      ]
    },
    {
      "type": "flow",
      "title": "Git Flow フロー",
      "direction": "horizontal",
      "steps": [
        { "label": "feature", "description": "機能開発", "color": "bg-blue-500" },
        { "label": "develop", "description": "統合テスト", "color": "bg-cyan-500" },
        { "label": "release", "description": "リリース準備", "color": "bg-purple-500" },
        { "label": "main", "description": "本番リリース", "color": "bg-green-500" }
      ]
    },
    {
      "type": "codeBlock",
      "title": "Git Flow 操作",
      "language": "bash",
      "code": "# Git Flow 初期化\ngit flow init\n\n# 機能ブランチ\ngit flow feature start login\n# 開発完了後...\ngit flow feature finish login\n\n# リリースブランチ\ngit flow release start 1.0.0\n# テスト完了後...\ngit flow release finish 1.0.0\n\n# 緊急修正\ngit flow hotfix start fix-bug\ngit flow hotfix finish fix-bug\n\n# 手動操作（git-flow ツール不使用）\ngit checkout -b feature/login develop\ngit checkout develop && git merge --no-ff feature/login\ngit branch -d feature/login"
    },
    {
      "type": "codeBlock",
      "title": "GitHub Flow 操作",
      "language": "bash",
      "code": "# 1. main からブランチ作成\ngit checkout main\ngit pull origin main\ngit checkout -b feature/new-feature\n\n# 2. 開発してコミット\ngit add .\ngit commit -m \"feat: add new feature\"\n\n# 3. リモートにプッシュ\ngit push -u origin feature/new-feature\n\n# 4. Pull Request 作成\ngh pr create --title \"Add new feature\" --body \"Description...\"\n\n# 5. Code Review 後にマージ\ngh pr merge --squash\n\n# 6. ブランチ削除\ngit branch -d feature/new-feature\ngit push origin --delete feature/new-feature"
    },
    {
      "type": "table",
      "title": "ブランチ命名規則",
      "highlightFirst": true,
      "headers": ["タイプ", "フォーマット", "例"],
      "rows": [
        ["機能", "feature/<name>", "feature/user-login"],
        ["修正", "fix/<issue>", "fix/memory-leak"],
        ["ホットフィックス", "hotfix/<version>", "hotfix/1.0.1"],
        ["リリース", "release/<version>", "release/2.0.0"],
        ["リファクタ", "refactor/<scope>", "refactor/auth-module"]
      ]
    },
    {
      "type": "comparison",
      "title": "戦略選択",
      "columns": [
        {
          "title": "Git Flow",
          "color": "from-blue-500 to-cyan-500",
          "items": [
            { "label": "適用", "description": "バージョンリリース製品" },
            { "label": "チーム", "description": "中大規模チーム" },
            { "label": "リリース", "description": "計画的リリース" },
            { "label": "複雑度", "description": "やや高い" }
          ]
        },
        {
          "title": "GitHub Flow",
          "color": "from-green-500 to-emerald-500",
          "items": [
            { "label": "適用", "description": "SaaS/継続デプロイ" },
            { "label": "チーム", "description": "小規模アジャイル" },
            { "label": "リリース", "description": "継続的リリース" },
            { "label": "複雑度", "description": "シンプル" }
          ]
        },
        {
          "title": "Trunk Based",
          "color": "from-purple-500 to-pink-500",
          "items": [
            { "label": "適用", "description": "大規模/マイクロサービス" },
            { "label": "チーム", "description": "成熟した開発チーム" },
            { "label": "リリース", "description": "Feature Flag" },
            { "label": "複雑度", "description": "中程度" }
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "ブランチ保護ルール",
      "language": "yaml",
      "code": "# GitHub Branch Protection Rules\n\nmain:\n  required_pull_request_reviews:\n    required_approving_review_count: 2\n    dismiss_stale_reviews: true\n  required_status_checks:\n    strict: true\n    contexts:\n      - \"ci/test\"\n      - \"ci/lint\"\n  enforce_admins: true\n  restrictions:\n    users: []\n    teams: [\"release-managers\"]\n\ndevelop:\n  required_pull_request_reviews:\n    required_approving_review_count: 1\n  required_status_checks:\n    contexts:\n      - \"ci/test\""
    },
    {
      "type": "list",
      "title": "ベストプラクティス",
      "style": "check",
      "items": [
        { "label": "メインブランチ保護", "description": "直接プッシュ禁止、PR レビュー必須" },
        { "label": "ブランチ命名規則", "description": "統一プレフィックスで識別・管理を容易に" },
        { "label": "早期削除", "description": "マージ後に機能ブランチを削除" },
        { "label": "Squash マージ", "description": "メイン履歴をクリーンに保つ" },
        { "label": "定期的な同期", "description": "機能ブランチを適時メインにリベース" }
      ]
    }
  ],
  "relatedTopics": ["Git ワークフロー", "CI/CD", "チームコラボレーション"]
}
