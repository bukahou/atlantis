---
title: メッセージキュー
description: Kafka、RabbitMQ と Redis メッセージミドルウェア技術
keyPoints:
  - メッセージパターンとセマンティクス保証
  - パブリッシュ/サブスクライブとポイントツーポイント
  - メッセージ信頼性と冪等性
  - メッセージ滞留とパフォーマンス最適化
relatedTopics:
  - マイクロサービスアーキテクチャ
  - イベント駆動設計
  - 分散システム
---

# メッセージキュー知識体系

## 核心概念

メッセージキューは分散システムで非同期通信とデカップリングを実現するコア コンポーネントです。

### メッセージキューの価値

```
コア能力
┌─────────────────────────────────────────┐
│  非同期デカップリング │  サービス間の直接依存がない   │
├────────────┼────────────────────────────┤
│  ピーク削減  │  突発的なトラフィックをバッファ   │
├────────────┼────────────────────────────┤
│  信頼性のある配信│  メッセージ消失を防ぐ        │
├────────────┼────────────────────────────┤
│  ブロードキャスト│  一対多のメッセージ配信      │
└────────────┴────────────────────────────┘

メッセージパターン
┌──────────────────────────────────────────┐
│   ポイントツーポイント (P2P)              │
│   Producer → Queue → Consumer            │
│   一つのメッセージは一人の消費者のみが処理  │
├──────────────────────────────────────────┤
│   パブリッシュ/サブスクライブ (Pub/Sub)   │
│   Publisher → Topic → Subscriber1        │
│                    → Subscriber2         │
│   一つのメッセージは複数のサブスクライバが受信│
└──────────────────────────────────────────┘
```

## 学習パス

### Kafka

- **核心概念** - Topic, Partition, Consumer Group
- **メッセージモデル** - ログ型メッセージストレージ
- **パフォーマンス** - バッチ、圧縮、ゼロコピー
- **応用シーン** - ログ収集、ストリーム処理

### RabbitMQ

- **核心概念** - Exchange, Queue, Binding
- **メッセージ確認** - ACK 機構
- **高可用性** - ミラーキュー、クラスタ
- **応用シーン** - タスクキュー、RPC

### Redis メッセージ

- **List** - シンプルキュー
- **Pub/Sub** - パブリッシュ/サブスクライブ
- **Stream** - 永続化メッセージストリーム

## ベストプラクティス

1. **冪等消費** - メッセージ重複を処理
2. **メッセージ順序** - 単一パーティションで順序保証
3. **監視アラート** - 滞留監視
4. **デッドレター処理** - 失敗メッセージ処理
