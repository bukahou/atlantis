---
title: 监控告警
description: Prometheus、Grafana 与日志系统的可观测性实践
keyPoints:
  - 指标采集与存储
  - 可视化仪表盘
  - 日志聚合分析
  - 告警规则配置
relatedTopics:
  - 分布式追踪
  - SRE 实践
  - 故障排查
---

# 监控告警知识体系

## 核心概念

可观测性包括指标、日志和追踪，是保障系统稳定性的关键能力。

### 可观测性三支柱

```
可观测性三支柱
┌─────────────────────────────────────────┐
│  Metrics    │  指标，量化系统状态       │
│  (指标)     │  CPU、内存、QPS、延迟     │
├─────────────┼───────────────────────────┤
│  Logs       │  日志，详细事件记录       │
│  (日志)     │  错误信息、调试日志       │
├─────────────┼───────────────────────────┤
│  Traces     │  追踪，请求链路           │
│  (追踪)     │  跨服务调用关系           │
└─────────────┴───────────────────────────┘

监控架构
┌────────────┐     ┌────────────┐
│  应用服务   │────→│ Prometheus │
│  Exporter  │     │  (存储)    │
└────────────┘     └─────┬──────┘
                         │
┌────────────┐     ┌─────▼──────┐
│  应用日志   │────→│  Grafana   │
│   (ELK)    │     │  (展示)    │
└────────────┘     └─────┬──────┘
                         │
                   ┌─────▼──────┐
                   │ AlertManager│
                   │  (告警)     │
                   └────────────┘
```

## 学习路径

### 1. 指标监控

- **Prometheus** - 指标采集、PromQL
- **Exporter** - 应用指标暴露
- **告警规则** - AlertManager 配置

### 2. 日志系统

- **收集** - Filebeat、Fluentd
- **存储** - Elasticsearch
- **展示** - Kibana

### 3. 可视化

- **Grafana** - 仪表盘设计
- **Panel** - 图表类型
- **变量** - 动态过滤

## 核心指标

| 指标类型 | 示例 | 用途 |
|---------|------|------|
| RED | Rate/Error/Duration | 服务监控 |
| USE | Utilization/Saturation/Errors | 资源监控 |
| Four Golden | 延迟/流量/错误/饱和度 | SRE 实践 |

## 最佳实践

1. **分层监控** - 基础设施、应用、业务
2. **告警分级** - P0-P4 告警级别
3. **Runbook** - 告警处理手册
4. **定期演练** - 验证监控有效性
