{
  "meta": {
    "title": "分布式数据库",
    "description": "分布式数据库架构、一致性与水平扩展",
    "icon": "database"
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "核心要点",
      "items": [
        "分布式数据库解决单机容量和性能瓶颈",
        "CAP 定理：一致性、可用性、分区容错性",
        "NewSQL 兼顾关系模型与水平扩展",
        "HTAP 实现 OLTP 与 OLAP 统一"
      ]
    },
    {
      "type": "text",
      "title": "概述",
      "content": "分布式数据库是为了解决单机数据库在容量、性能和可用性方面的限制而设计的系统。通过将数据分布在多个节点上，实现水平扩展、高可用和容灾能力。NewSQL 数据库如 TiDB、CockroachDB 在保持 SQL 兼容性的同时，提供了分布式存储和事务能力。"
    },
    {
      "type": "comparison",
      "title": "分布式数据库 vs 单机数据库",
      "columns": [
        {
          "title": "分布式数据库",
          "color": "from-blue-500 to-cyan-500",
          "items": [
            { "label": "扩展性", "description": "水平扩展，自动分片" },
            { "label": "容量", "description": "PB 级数据存储" },
            { "label": "可用性", "description": "多副本自动故障转移" },
            { "label": "一致性", "description": "分布式事务，强一致" }
          ]
        },
        {
          "title": "单机数据库",
          "color": "from-green-500 to-emerald-500",
          "items": [
            { "label": "扩展性", "description": "垂直扩展，手动分库" },
            { "label": "容量", "description": "TB 级数据存储" },
            { "label": "可用性", "description": "主从复制，人工切换" },
            { "label": "一致性", "description": "单机事务，简单可靠" }
          ]
        }
      ]
    },
    {
      "type": "cards",
      "title": "核心概念",
      "layout": "grid",
      "columns": 2,
      "items": [
        {
          "title": "数据分片",
          "badge": "Sharding",
          "badgeColor": "blue",
          "points": [
            "Range 分片：按范围划分",
            "Hash 分片：均匀分布",
            "自动分裂与负载均衡"
          ]
        },
        {
          "title": "一致性协议",
          "badge": "Consensus",
          "badgeColor": "green",
          "points": [
            "Raft 协议：多副本一致",
            "Paxos：分布式共识",
            "2PC/3PC：分布式事务"
          ]
        },
        {
          "title": "高可用架构",
          "badge": "HA",
          "badgeColor": "purple",
          "points": [
            "多副本冗余存储",
            "自动故障检测与转移",
            "跨数据中心容灾"
          ]
        },
        {
          "title": "HTAP 能力",
          "badge": "混合负载",
          "badgeColor": "amber",
          "points": [
            "行存支持 OLTP",
            "列存加速 OLAP",
            "实时数据同步"
          ]
        }
      ]
    },
    {
      "type": "flow",
      "title": "分布式事务流程",
      "subtitle": "两阶段提交 (2PC)",
      "direction": "horizontal",
      "steps": [
        { "label": "Prepare", "description": "准备阶段", "color": "bg-blue-500" },
        { "label": "Commit/Abort", "description": "提交/回滚", "color": "bg-purple-500" },
        { "label": "Apply", "description": "应用变更", "color": "bg-green-500" }
      ]
    },
    {
      "type": "table",
      "title": "主流分布式数据库",
      "highlightFirst": true,
      "headers": ["数据库", "兼容协议", "一致性", "特点"],
      "rows": [
        ["TiDB", "MySQL", "强一致", "HTAP、开源、PingCAP"],
        ["CockroachDB", "PostgreSQL", "强一致", "Geo-distributed"],
        ["OceanBase", "MySQL/Oracle", "强一致", "蚂蚁金服"],
        ["YugabyteDB", "PostgreSQL", "强一致", "云原生"]
      ]
    }
  ],
  "relatedTopics": ["分库分表", "CAP 定理", "分布式事务"],
  "articles": [
    {
      "slug": "tidb",
      "title": "TiDB",
      "description": "兼容 MySQL 的分布式 HTAP 数据库",
      "priority": "recommended"
    }
  ]
}
