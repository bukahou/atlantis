---
title: API 设计
description: RESTful API、GraphQL 与 gRPC 接口设计规范
keyPoints:
  - RESTful 设计原则
  - GraphQL 查询语言
  - gRPC 高性能通信
  - API 版本管理
relatedTopics:
  - 微服务架构
  - 网关设计
  - 接口安全
---

# API 设计知识体系

## 核心概念

API 是系统间通信的契约，良好的 API 设计决定了系统的可用性和可维护性。

### API 风格对比

```
三种主流 API 风格
┌─────────────────────────────────────────────┐
│           REST                              │
│  • 资源导向，HTTP 语义                       │
│  • 简单直观，广泛支持                        │
│  • 适合 CRUD 操作                           │
├─────────────────────────────────────────────┤
│           GraphQL                           │
│  • 查询语言，按需获取                        │
│  • 单一端点，减少请求                        │
│  • 适合复杂数据关系                          │
├─────────────────────────────────────────────┤
│           gRPC                              │
│  • Protocol Buffers，二进制                 │
│  • 双向流，高性能                            │
│  • 适合微服务内部通信                        │
└─────────────────────────────────────────────┘
```

## 学习路径

### RESTful API

- **资源设计** - URI 规范、命名约定
- **HTTP 方法** - GET, POST, PUT, DELETE
- **状态码** - 2xx, 4xx, 5xx 语义
- **版本控制** - URL 版本、Header 版本

### GraphQL

- **Schema 定义** - Type, Query, Mutation
- **查询语法** - 字段选择、嵌套查询
- **解析器** - Resolver 实现
- **优化** - DataLoader, 缓存

### gRPC

- **Protobuf** - 消息定义
- **服务定义** - RPC 方法
- **流式通信** - 单向流、双向流
- **拦截器** - 中间件模式

## 选型指南

| 场景 | 推荐方案 | 原因 |
|-----|---------|------|
| 公开 API | REST | 简单、标准化 |
| 移动应用 | GraphQL | 按需获取、减少流量 |
| 微服务内部 | gRPC | 高性能、强类型 |
| 实时通信 | WebSocket/gRPC | 双向通信 |

## 最佳实践

1. **一致性** - 统一的命名和响应格式
2. **文档化** - OpenAPI/Swagger 规范
3. **版本管理** - 兼容性与演进
4. **错误处理** - 清晰的错误信息
