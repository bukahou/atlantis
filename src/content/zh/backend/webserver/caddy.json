{
  "meta": {
    "title": "Caddy",
    "description": "自动 HTTPS 的现代 Web 服务器",
    "order": 3,
    "tags": ["Caddy", "Web服务器", "自动HTTPS", "Go"]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "核心概念",
      "items": [
        "自动 HTTPS：自动获取和续期 Let's Encrypt 证书",
        "简洁配置：Caddyfile 语法直观易懂",
        "Go 语言编写：单二进制文件部署",
        "内置功能丰富：反向代理、负载均衡、压缩"
      ]
    },
    {
      "type": "text",
      "title": "Caddy 简介",
      "content": "Caddy 是一款使用 Go 语言编写的现代 Web 服务器，最大的特点是自动 HTTPS。它会自动为你的域名获取和续期 TLS 证书，无需任何额外配置。Caddyfile 配置语法简洁直观，非常适合快速部署和开发环境使用。"
    },
    {
      "type": "codeBlock",
      "title": "Caddyfile 基础配置",
      "language": "caddyfile",
      "code": "# 最简单的静态站点\nexample.com {\n    root * /var/www/html\n    file_server\n}\n\n# 反向代理\napi.example.com {\n    reverse_proxy localhost:8080\n}\n\n# SPA 应用\napp.example.com {\n    root * /var/www/app\n    try_files {path} /index.html\n    file_server\n    encode gzip\n}"
    },
    {
      "type": "cards",
      "title": "核心特性",
      "layout": "grid",
      "columns": 2,
      "items": [
        {
          "title": "自动 HTTPS",
          "badge": "核心",
          "badgeColor": "green",
          "points": [
            "自动申请证书",
            "自动续期证书",
            "自动 HTTP→HTTPS 重定向",
            "支持 ACME 协议"
          ]
        },
        {
          "title": "反向代理",
          "badge": "功能",
          "badgeColor": "blue",
          "points": [
            "负载均衡",
            "健康检查",
            "WebSocket 支持",
            "gRPC 代理"
          ]
        },
        {
          "title": "静态服务",
          "badge": "功能",
          "badgeColor": "purple",
          "points": [
            "文件服务器",
            "目录浏览",
            "压缩传输",
            "范围请求"
          ]
        },
        {
          "title": "API 配置",
          "badge": "高级",
          "badgeColor": "amber",
          "points": [
            "JSON 配置 API",
            "动态配置更新",
            "零停机重载",
            "配置持久化"
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "高级配置示例",
      "language": "caddyfile",
      "code": "{\n    # 全局配置\n    email admin@example.com\n    acme_ca https://acme-v02.api.letsencrypt.org/directory\n}\n\nexample.com {\n    # 负载均衡\n    reverse_proxy /api/* {\n        to localhost:8001 localhost:8002 localhost:8003\n        lb_policy round_robin\n        health_uri /health\n        health_interval 10s\n    }\n    \n    # 静态文件\n    handle /static/* {\n        root * /var/www\n        file_server\n    }\n    \n    # SPA 路由\n    handle {\n        root * /var/www/app\n        try_files {path} /index.html\n        file_server\n    }\n    \n    # 日志\n    log {\n        output file /var/log/caddy/access.log\n        format json\n    }\n    \n    # 压缩\n    encode gzip zstd\n    \n    # 安全头\n    header {\n        X-Content-Type-Options nosniff\n        X-Frame-Options SAMEORIGIN\n        -Server\n    }\n}"
    },
    {
      "type": "table",
      "title": "Caddy vs Nginx",
      "highlightFirst": true,
      "headers": ["特性", "Caddy", "Nginx"],
      "rows": [
        ["自动 HTTPS", "内置支持", "需要 certbot"],
        ["配置语法", "简洁直观", "较为复杂"],
        ["热重载", "原生支持", "需要信号"],
        ["内存占用", "稍高", "极低"],
        ["生态", "相对较新", "非常成熟"]
      ]
    },
    {
      "type": "list",
      "title": "使用场景",
      "style": "check",
      "items": [
        { "label": "开发环境", "description": "快速启动本地 HTTPS 服务" },
        { "label": "小型项目", "description": "简单配置即可完成部署" },
        { "label": "API 网关", "description": "动态配置、自动证书" },
        { "label": "容器部署", "description": "单二进制文件，易于容器化" }
      ]
    }
  ],
  "relatedTopics": ["Let's Encrypt", "Nginx", "反向代理"]
}
