{
  "meta": {
    "title": "Apache HTTP Server",
    "description": "功能丰富的开源 Web 服务器",
    "order": 2,
    "tags": ["Apache", "Web服务器", "httpd", "mod"]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "核心概念",
      "items": [
        "模块化架构，功能丰富可扩展",
        ".htaccess 支持目录级配置",
        "多种 MPM 模式适应不同场景",
        "完善的文档和社区支持"
      ]
    },
    {
      "type": "text",
      "title": "Apache 简介",
      "content": "Apache HTTP Server 是世界上使用最广泛的 Web 服务器之一，由 Apache 软件基金会维护。其模块化设计使得功能扩展非常灵活，通过 .htaccess 文件可以实现目录级别的配置，这在共享主机环境中非常有用。Apache 支持多种多进程模块（MPM），可根据需求选择合适的并发模型。"
    },
    {
      "type": "comparison",
      "title": "MPM 模式对比",
      "columns": [
        {
          "title": "prefork",
          "color": "from-blue-500 to-cyan-500",
          "items": [
            { "label": "模型", "description": "多进程，每进程单线程" },
            { "label": "兼容", "description": "兼容非线程安全模块" },
            { "label": "适用", "description": "mod_php 环境" }
          ]
        },
        {
          "title": "worker",
          "color": "from-green-500 to-emerald-500",
          "items": [
            { "label": "模型", "description": "多进程，每进程多线程" },
            { "label": "性能", "description": "内存占用更低" },
            { "label": "适用", "description": "高并发静态内容" }
          ]
        },
        {
          "title": "event",
          "color": "from-purple-500 to-pink-500",
          "items": [
            { "label": "模型", "description": "事件驱动 + 多线程" },
            { "label": "性能", "description": "最佳并发处理" },
            { "label": "适用", "description": "推荐用于 2.4+" }
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "虚拟主机配置",
      "language": "apache",
      "code": "<VirtualHost *:80>\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/example\n    \n    <Directory /var/www/example>\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n    </Directory>\n    \n    ErrorLog ${APACHE_LOG_DIR}/example_error.log\n    CustomLog ${APACHE_LOG_DIR}/example_access.log combined\n</VirtualHost>\n\n<VirtualHost *:443>\n    ServerName example.com\n    DocumentRoot /var/www/example\n    \n    SSLEngine on\n    SSLCertificateFile /etc/ssl/certs/example.crt\n    SSLCertificateKeyFile /etc/ssl/private/example.key\n    \n    Header always set Strict-Transport-Security \"max-age=31536000\"\n</VirtualHost>"
    },
    {
      "type": "cards",
      "title": "常用模块",
      "layout": "grid",
      "columns": 3,
      "items": [
        {
          "title": "mod_rewrite",
          "badge": "核心",
          "badgeColor": "blue",
          "points": [
            "URL 重写规则",
            "正则表达式匹配",
            "条件判断"
          ]
        },
        {
          "title": "mod_proxy",
          "badge": "代理",
          "badgeColor": "green",
          "points": [
            "反向代理",
            "负载均衡",
            "WebSocket 代理"
          ]
        },
        {
          "title": "mod_security",
          "badge": "安全",
          "badgeColor": "red",
          "points": [
            "Web 应用防火墙",
            "SQL 注入防护",
            "XSS 防护"
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": ".htaccess 示例",
      "language": "apache",
      "code": "# 启用 URL 重写\nRewriteEngine On\nRewriteBase /\n\n# 强制 HTTPS\nRewriteCond %{HTTPS} off\nRewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]\n\n# SPA 路由支持\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule ^ index.html [L]\n\n# 缓存控制\n<IfModule mod_expires.c>\n    ExpiresActive On\n    ExpiresByType image/jpeg \"access plus 1 year\"\n    ExpiresByType text/css \"access plus 1 month\"\n    ExpiresByType application/javascript \"access plus 1 month\"\n</IfModule>\n\n# 安全头\nHeader set X-Content-Type-Options \"nosniff\"\nHeader set X-Frame-Options \"SAMEORIGIN\""
    },
    {
      "type": "list",
      "title": "最佳实践",
      "style": "check",
      "items": [
        { "label": "使用 event MPM", "description": "Apache 2.4+ 推荐使用 event 模式" },
        { "label": "禁用不需要的模块", "description": "减少内存占用和攻击面" },
        { "label": "限制 .htaccess", "description": "AllowOverride None 提升性能" },
        { "label": "启用 HTTP/2", "description": "mod_http2 提供现代协议支持" }
      ]
    }
  ],
  "relatedTopics": ["Nginx", "mod_rewrite", "SSL/TLS"]
}
