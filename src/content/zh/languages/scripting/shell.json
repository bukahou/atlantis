{
  "meta": {
    "title": "Shell 脚本基础",
    "description": "Bash/Shell 脚本编程、常用命令与自动化运维",
    "order": 2,
    "tags": ["Shell", "Bash", "自动化"]
  },
  "sections": [
    {
      "type": "keyPoints",
      "title": "核心概念",
      "items": [
        "Shell 是操作系统的命令行解释器",
        "Bash 是最常用的 Shell",
        "管道机制实现命令组合",
        "广泛用于系统管理和自动化运维"
      ]
    },
    {
      "type": "codeBlock",
      "title": "基础语法",
      "language": "bash",
      "code": "#!/bin/bash\n\n# 变量\nNAME=\"Shell\"\nVERSION=5\necho \"Welcome to $NAME\"\necho \"Version: ${VERSION}\"\n\n# 命令执行\ncurrent_date=$(date +%Y-%m-%d)\nfile_count=`ls | wc -l`\n\n# 数组\narr=(a b c d e)\necho ${arr[0]}       # 第一个元素\necho ${arr[@]}       # 所有元素\necho ${#arr[@]}      # 长度"
    },
    {
      "type": "cards",
      "title": "特殊变量",
      "layout": "grid",
      "columns": 3,
      "items": [
        {
          "title": "位置参数",
          "badge": "$1-$9",
          "badgeColor": "blue",
          "points": [
            "$0 脚本名",
            "$1 $2 参数",
            "$# 参数个数"
          ]
        },
        {
          "title": "状态变量",
          "badge": "$?",
          "badgeColor": "green",
          "points": [
            "$? 退出状态",
            "$$ 当前 PID",
            "$! 后台 PID"
          ]
        },
        {
          "title": "参数列表",
          "badge": "$@",
          "badgeColor": "purple",
          "points": [
            "$@ 独立字符串",
            "$* 单个字符串",
            "$_ 上个参数"
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "控制流",
      "language": "bash",
      "code": "# 条件判断\nif [[ \"$name\" == \"Alice\" && \"$age\" -gt 20 ]]; then\n    echo \"Match\"\nfi\n\n# 文件测试\nif [[ -f \"$file\" ]]; then echo \"是文件\"; fi\nif [[ -d \"$dir\" ]]; then echo \"是目录\"; fi\n\n# 循环\nfor i in {1..10}; do\n    echo $i\ndone\n\nwhile IFS= read -r line; do\n    echo \"$line\"\ndone < file.txt\n\n# case 语句\ncase \"$option\" in\n    start) echo \"Starting...\" ;;\n    stop) echo \"Stopping...\" ;;\n    *) echo \"Unknown\" ;;\nesac"
    },
    {
      "type": "comparison",
      "title": "文本处理三剑客",
      "columns": [
        {
          "title": "grep",
          "color": "from-blue-500 to-cyan-500",
          "items": [
            { "label": "用途", "description": "文本搜索" },
            { "label": "常用", "description": "-i -r -n -v" }
          ]
        },
        {
          "title": "sed",
          "color": "from-green-500 to-emerald-500",
          "items": [
            { "label": "用途", "description": "流编辑" },
            { "label": "常用", "description": "s/old/new/g" }
          ]
        },
        {
          "title": "awk",
          "color": "from-purple-500 to-pink-500",
          "items": [
            { "label": "用途", "description": "列处理" },
            { "label": "常用", "description": "{print $1}" }
          ]
        }
      ]
    },
    {
      "type": "codeBlock",
      "title": "管道与重定向",
      "language": "bash",
      "code": "# 管道\ncat file | grep \"pattern\" | sort | uniq\nps aux | grep nginx\n\n# 输出重定向\ncommand > file      # 覆盖\ncommand >> file     # 追加\ncommand 2>&1        # 错误重定向\ncommand &> /dev/null  # 丢弃\n\n# xargs\nfind . -name \"*.log\" | xargs rm\nfind . -name \"*.txt\" | xargs -I {} cp {} backup/"
    },
    {
      "type": "codeBlock",
      "title": "错误处理模板",
      "language": "bash",
      "code": "#!/bin/bash\nset -e          # 遇错退出\nset -u          # 未定义变量报错\nset -o pipefail # 管道错误检测\n\n# 清理函数\ncleanup() { rm -f \"$temp_file\"; }\ntrap cleanup EXIT\n\n# 错误处理\nerror_exit() {\n    echo \"Error: $1\" >&2\n    exit 1\n}\n\ncommand || error_exit \"Command failed\""
    },
    {
      "type": "list",
      "title": "最佳实践",
      "style": "check",
      "items": [
        { "label": "使用 [[ ]]", "description": "比 [ ] 更安全强大" },
        { "label": "set -euo pipefail", "description": "严格错误处理" },
        { "label": "trap 清理", "description": "确保退出时清理资源" },
        { "label": "ShellCheck", "description": "使用静态分析工具" }
      ]
    }
  ],
  "relatedTopics": ["Python", "Linux", "DevOps"]
}
